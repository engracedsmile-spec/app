"use strict";exports.id=2210,exports.ids=[2210],exports.modules={33940:(e,s,t)=>{t.d(s,{r:()=>eX});var a=t(10326),r=t(17577),l=t(49260),n=t(85999),i=t(35047),o=t(91664),d=t(39183),c=t(78151),u=t(40765),m=t(77506),x=t(79635),h=t(77636),f=t(37358),p=t(28916),g=t(51223),j=t(41190);let b=({icon:e,title:s,value:t,onEdit:r})=>(0,a.jsxs)("div",{onClick:r,className:(0,g.cn)("flex items-start gap-4 p-4 rounded-xl bg-muted/50 border border-border/50",r&&"cursor-pointer hover:bg-muted"),children:[a.jsx("div",{className:"flex-shrink-0 mt-1",children:e}),(0,a.jsxs)("div",{className:"flex-1",children:[a.jsx("p",{className:"font-bold",children:s}),t&&a.jsx("p",{className:"text-sm text-muted-foreground",children:t})]}),r&&a.jsx(d.Z,{className:"h-5 w-5 text-muted-foreground self-center"})]}),y=({data:e,onConfirm:s,onBack:t,onEdit:r,isCalculatingPrice:l,onCouponChange:n})=>{let i;let d=e.paymentMethod&&e.seats&&e.seats.length>0;i="charter"===e.bookingType?"Entire Vehicle (Charter)":e.seats&&e.seats.length>0?`Seat${e.seats.length>1?"s":""} ${e.seats.join(", ")}`:"No seat selected";let g=e.price||0,y=[e.passengerName,...e.passengers?.map(e=>e.name)||[]].filter(Boolean);return(0,a.jsxs)("div",{className:"h-full flex flex-col bg-card",children:[(0,a.jsxs)("main",{className:"flex-1 space-y-4 p-4 md:p-6 overflow-y-auto",children:[a.jsx(b,{icon:a.jsx(x.Z,{className:"text-primary h-6 w-6"}),title:"Passengers",value:y.join(", ")||"Not set",onEdit:()=>r(2)}),"charter"!==e.bookingType&&(0,a.jsxs)(a.Fragment,{children:[a.jsx(b,{icon:a.jsx(h.Z,{className:"text-primary h-6 w-6"}),title:"Pickup",value:e.pickupAddress||"Not set",onEdit:()=>r(0)}),a.jsx(b,{icon:a.jsx(h.Z,{className:"text-primary h-6 w-6"}),title:"Destination",value:e.destinationAddress||"Not set",onEdit:()=>r(0)})]}),a.jsx(b,{icon:a.jsx(f.Z,{className:"text-primary h-6 w-6"}),title:"Travel Date",value:e.travelDate?new Date(e.travelDate).toLocaleString("en-US",{dateStyle:"full"}):"Not set",onEdit:()=>r(0)}),a.jsx(b,{icon:a.jsx(c.Z,{className:"text-primary h-6 w-6"}),title:i,value:`${y.length} passenger(s)`,onEdit:()=>r(2)}),(0,a.jsxs)("div",{className:"p-4 rounded-xl bg-muted/50 border border-border/50 space-y-2",children:[(0,a.jsxs)("label",{className:"font-bold flex items-center gap-2",children:[a.jsx(u.Z,{className:"text-primary h-5 w-5"})," Coupon Code"]}),a.jsx(j.I,{placeholder:"Enter coupon code (optional)",onChange:e=>n(e.target.value),defaultValue:e.couponCode})]}),a.jsx(b,{icon:a.jsx(p.Z,{className:"text-primary h-6 w-6"}),title:e.paymentMethod||"Choose payment method",value:"",onEdit:()=>r(2)})]}),(0,a.jsxs)("footer",{className:"p-4 border-t border-border/50 bg-card space-y-3 shrink-0",children:[(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Fare"}),a.jsx("p",{className:"text-3xl font-bold",children:new Intl.NumberFormat("en-NG",{style:"currency",currency:"NGN"}).format(g)})]}),a.jsx(o.z,{onClick:()=>s(),className:"h-14 w-full text-lg font-bold",disabled:l||!d,children:l?(0,a.jsxs)(a.Fragment,{children:[a.jsx(m.Z,{className:"mr-2 h-5 w-5 animate-spin"}),"Confirming..."]}):"Confirm & Book"})]})]})};var N=t(29752),w=t(6507),v=t(997),C=t(16671),k=t(66307),M=t(45091),D=t(43810),A=t(31540),S=t(24230),I=t(90434),L=t(92068),T=t(62539),Z=t(17546),P=t(87296);let z=({icon:e,title:s,description:t})=>(0,a.jsxs)("div",{className:"flex items-start gap-4",children:[a.jsx("div",{className:"flex-shrink-0 bg-primary/10 text-primary p-2 rounded-full",children:a.jsx(e,{className:"h-5 w-5"})}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"font-semibold",children:s}),a.jsx("p",{className:"text-sm text-muted-foreground",children:t})]})]}),E=({booking:e,onFinish:s,isGuest:t=!0})=>{let l=(0,i.useRouter)(),d=(0,r.useRef)(null),[c,u]=(0,r.useState)(!1);(0,L.useReactToPrint)({content:()=>d.current,documentTitle:`Ticket-${e?.code}`,onPrintError:e=>{console.error("Print error:",e),n.Am.error("Print Failed",{description:"Could not download ticket. Please try again."})}});let m=async()=>{if(d.current&&e){u(!0);try{let s=await (0,Z.YM)(d.current,{quality:1,pixelRatio:2,backgroundColor:"#ffffff"}),t=new P.jsPDF({orientation:"portrait",unit:"px",format:[400,600]}),a=t.getImageProperties(s),r=t.internal.pageSize.getWidth(),l=a.height*r/a.width;t.addImage(s,"PNG",0,0,r,l),t.save(`Ticket-${e.code.slice(0,10)}.pdf`),n.Am.success("Downloaded!",{description:"Your ticket has been downloaded as PDF."})}catch(e){console.error("Download error:",e),n.Am.error("Download Failed",{description:"Could not download ticket. Please try the print option instead."})}finally{u(!1)}}};if(!e)return(0,a.jsxs)("div",{className:"flex flex-col items-center justify-center h-full p-4 text-center",children:[a.jsx("p",{className:"text-muted-foreground mb-4",children:"No trip details found. Something went wrong."}),a.jsx(o.z,{onClick:()=>{localStorage.removeItem("bookingFlowProgress"),l.push("/")},children:"Back to Home"})]});let x=[{icon:w.Z,title:"Trip Reminders & Notifications",description:"Get live updates and reminders about your trip."},{icon:v.Z,title:"View Trip History",description:"Keep a record of all your past and upcoming journeys."},{icon:C.Z,title:"Secure Wallet",description:"Manage funds for even faster one-click bookings."}];return(0,a.jsxs)("div",{className:"h-full flex flex-col bg-card",children:[a.jsx("div",{style:{display:"none"},children:a.jsx(T.S,{ref:d,booking:e})}),(0,a.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 md:p-6 space-y-6",children:[(0,a.jsxs)("div",{className:"text-center space-y-2",children:[a.jsx("div",{className:"inline-flex items-center justify-center bg-green-500/20 text-green-400 rounded-full p-3 mb-2",children:a.jsx(k.Z,{className:"h-8 w-8"})}),a.jsx("h1",{className:"text-2xl font-bold",children:"Trip Booked Successfully"}),a.jsx("p",{className:"text-muted-foreground",children:t?"Your ticket is ready. Download it now and create an account to manage your trips.":e.driverName?`Your ticket is ready. Your driver is ${e.driverName}.`:"Your ticket is ready. A driver will be assigned to your trip shortly."})]}),a.jsx(N.Zb,{className:"bg-card",children:a.jsx(N.aY,{className:"p-4",children:a.jsx(T.S,{booking:e})})}),e.wifiPassword&&(0,a.jsxs)(N.Zb,{className:"bg-blue-500/5 border-blue-500/20",children:[a.jsx(N.Ol,{children:(0,a.jsxs)(N.ll,{className:"flex items-center gap-2 text-blue-400",children:[a.jsx(M.Z,{className:"h-5 w-5"}),"Onboard WiFi Details"]})}),(0,a.jsxs)(N.aY,{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-xs text-muted-foreground",children:"Network (SSID)"}),a.jsx("p",{className:"font-semibold text-lg",children:e.wifiSSID})]}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-xs text-muted-foreground",children:"Password"}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx("p",{className:"font-semibold text-lg font-mono tracking-wider flex-1",children:e.wifiPassword}),a.jsx(o.z,{variant:"ghost",size:"icon",onClick:()=>{navigator.clipboard.writeText(e.wifiPassword||""),n.Am.success("Copied!")},children:a.jsx(D.Z,{className:"h-5 w-5"})})]})]}),t&&a.jsx("p",{className:"text-xs text-blue-400/80",children:"Tip: Screenshot this or create an account to save it automatically."})]})]}),a.jsx(o.z,{onClick:m,className:"w-full h-14 text-lg font-bold",disabled:c,children:c?a.jsx(a.Fragment,{children:"Preparing Download..."}):(0,a.jsxs)(a.Fragment,{children:[a.jsx(A.Z,{className:"mr-3 h-6 w-6"}),"Download Your Ticket"]})}),t&&(0,a.jsxs)(N.Zb,{className:"bg-card/50",children:[a.jsx(N.Ol,{children:a.jsx(N.ll,{children:"Why Create an Account?"})}),a.jsx(N.aY,{className:"space-y-4",children:x.map(e=>a.jsx(z,{...e},e.title))})]})]}),a.jsx("footer",{className:"p-4 border-t border-border/50 bg-card space-y-3 shrink-0",children:t?(0,a.jsxs)(a.Fragment,{children:[a.jsx(o.z,{asChild:!0,className:"w-full h-12 text-base font-semibold",children:a.jsx(I.default,{href:`/signup?tripId=${e.code}`,children:"Create Account"})}),(0,a.jsxs)("p",{className:"text-sm text-center text-muted-foreground",children:["Already have an account? ",a.jsx(I.default,{href:`/signin?tripId=${e.code}`,className:"font-bold text-primary hover:underline",children:"Sign In"})]})]}):(0,a.jsxs)(o.z,{onClick:s,className:"w-full h-12 text-base font-semibold",children:["Go to Dashboard ",a.jsx(S.Z,{className:"ml-2 h-5 w-5"})]})})]})};var R=t(86333),F=t(12969),Y=t(29280),O=t(98181),B=t(33194),_=t(51027);let G=({onNext:e,initialData:s,routes:t,terminals:l,isProcessing:d})=>{let c=(0,i.useRouter)(),[u,x]=(0,r.useState)(s.routeId&&t.find(e=>e.id===s.routeId)?.originTerminalId||""),[p,g]=(0,r.useState)(s.routeId&&t.find(e=>e.id===s.routeId)?.destinationTerminalId||""),[j,b]=(0,r.useState)(s.travelDate?new Date(s.travelDate):new Date),y=t.filter(e=>e.originTerminalId===u).map(e=>l.find(s=>s.id===e.destinationTerminalId)).filter(Boolean).reduce((e,s)=>(e.find(e=>e.id===s.id)||e.push(s),e),[]);(0,r.useEffect)(()=>{u&&1===y.length&&p!==y[0].id&&g(y[0].id)},[u,y,p]);let N=async()=>{if(!u||!p||!j){n.Am.error("Missing Information",{description:"Please select departure, destination, and date."});return}let s=t.find(e=>e.originTerminalId===u&&e.destinationTerminalId===p);if(!s){n.Am.info("Route Not Available",{description:"We do not currently operate on the selected route. Please select another."});return}let a=l.find(e=>e.id===u),r=l.find(e=>e.id===p);e({pickupAddress:a?.name||u,destinationAddress:r?.name||p,travelDate:(0,O.WU)(j,"yyyy-MM-dd"),routeId:s.id})};return(0,a.jsxs)("div",{className:"flex flex-col h-full bg-card",children:[(0,a.jsxs)("header",{className:"p-4 flex items-center justify-center relative border-b border-border/50 shrink-0",children:[a.jsx(o.z,{type:"button",variant:"ghost",size:"icon",onClick:()=>c.push("/"),className:"absolute left-4 top-1/2 -translate-y-1/2",children:a.jsx(R.Z,{className:"h-5 w-5"})}),a.jsx("div",{className:"flex-1 text-center",children:a.jsx("h1",{className:"text-xl font-bold",children:"Book Your Trip"})})]}),a.jsx("main",{className:"flex-1 overflow-y-auto p-4 md:p-6 flex flex-col justify-center",children:a.jsx("div",{className:"w-full max-w-md mx-auto",children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"relative",children:[a.jsx("label",{className:"text-xs font-semibold text-muted-foreground uppercase tracking-wider mb-2 block",children:"From"}),(0,a.jsxs)(Y.Ph,{onValueChange:e=>{x(e);let s=t.find(s=>s.originTerminalId===e);s&&s.destinationTerminalId===p||g("")},value:u,children:[(0,a.jsxs)(Y.i4,{className:"w-full pl-12 pr-4 py-4 h-16 bg-muted border-2 border-border rounded-2xl text-lg font-semibold text-foreground appearance-none cursor-pointer focus:outline-none focus:ring-2 focus:ring-primary/50 transition-all flex items-center",children:[a.jsx("div",{className:"absolute left-0 top-0 bottom-0 flex items-center justify-center w-12 text-primary",children:a.jsx(h.Z,{size:20})}),a.jsx(Y.ki,{placeholder:"Select Terminal"})]}),a.jsx(Y.Bw,{children:l.map(e=>a.jsx(Y.Ql,{value:e.id,children:e.name},e.id))})]})]}),a.jsx("div",{className:"flex justify-center -my-3 relative z-10",children:a.jsx("button",{onClick:()=>{t.find(e=>e.id===t.find(e=>e.originTerminalId===u&&e.destinationTerminalId===p)?.reverseRouteId)?(x(p),g(u)):n.Am.info("No Reverse Route",{description:"A reverse route is not set up. Please select manually."})},className:"bg-gradient-to-br from-primary to-primary/80 hover:from-primary/90 hover:to-primary text-primary-foreground w-12 h-12 rounded-full shadow-lg shadow-primary/30 flex items-center justify-center transition-all duration-300 hover:scale-110 active:scale-95",children:a.jsx(F.Z,{size:20})})}),(0,a.jsxs)("div",{className:"relative",children:[a.jsx("label",{className:"text-xs font-semibold text-muted-foreground uppercase tracking-wider mb-2 block",children:"To"}),(0,a.jsxs)(Y.Ph,{onValueChange:g,value:p,disabled:!u,children:[(0,a.jsxs)(Y.i4,{className:"w-full pl-12 pr-4 py-4 h-16 bg-muted border-2 border-border rounded-2xl text-lg font-semibold text-foreground appearance-none cursor-pointer focus:outline-none focus:ring-2 focus:ring-primary/50 transition-all flex items-center",children:[a.jsx("div",{className:"absolute left-0 top-0 bottom-0 flex items-center justify-center w-12 text-primary",children:a.jsx(h.Z,{size:20})}),a.jsx(Y.ki,{placeholder:"Select Terminal"})]}),a.jsx(Y.Bw,{children:y.map(e=>a.jsx(Y.Ql,{value:e.id,disabled:e.id===u,children:e.name},e.id))})]})]}),a.jsx("div",{className:"grid grid-cols-1 gap-4",children:(0,a.jsxs)("div",{children:[a.jsx("label",{className:"text-xs font-semibold text-muted-foreground uppercase tracking-wider mb-2 block",children:"Date"}),(0,a.jsxs)(_.J2,{children:[a.jsx(_.xo,{asChild:!0,children:(0,a.jsxs)(o.z,{variant:"outline",className:"w-full h-12 justify-start text-left font-medium bg-muted border-2 border-border rounded-xl text-foreground",children:[a.jsx(f.Z,{className:"mr-2 h-4 w-4 text-primary"}),j?(0,O.WU)(j,"PPP"):a.jsx("span",{children:"Pick a date"})]})}),a.jsx(_.yk,{className:"w-auto p-0",align:"start",children:a.jsx(B.f,{mode:"single",selected:j,onSelect:b,disabled:e=>e<new Date(new Date().setHours(0,0,0,0)),initialFocus:!0})})]})]})})]})})}),a.jsx("footer",{className:"p-4 border-t border-border/50 bg-card shrink-0",children:a.jsx(o.z,{onClick:N,className:"w-full bg-gradient-to-r from-primary via-primary/90 to-primary/80 hover:shadow-primary/40 text-primary-foreground font-bold text-lg py-4 h-16 rounded-2xl shadow-lg shadow-primary/30 transition-all duration-300 hover:shadow-xl hover:-translate-y-0.5 active:translate-y-0",disabled:d,children:d?a.jsx(m.Z,{className:"mr-2 h-5 w-5 animate-spin"}):"Search Departures"})})]})};var $=t(48998),U=t(50949),W=t(81536),H=t(38227),J=t(38443),Q=t(33261);let V=({trip:e,onSelect:s,selected:t})=>{let r=7-(e.bookedSeats?.length||0);return a.jsx(N.Zb,{onClick:s,className:(0,g.cn)("cursor-pointer hover:border-primary/50 hover:bg-primary/5 transition-all duration-200",t&&"border-primary ring-2 ring-primary"),children:(0,a.jsxs)(N.aY,{className:"p-4 grid grid-cols-3 items-center gap-4",children:[(0,a.jsxs)("div",{className:"col-span-2 flex items-center gap-4",children:[a.jsx("div",{className:"p-3 bg-primary/10 rounded-full hidden sm:block",children:a.jsx($.Z,{className:"h-6 w-6 text-primary"})}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[a.jsx("p",{className:"font-bold text-lg",children:e.departurePeriod}),"Boarding"===e.status&&a.jsx(J.C,{variant:"outline",className:"text-xs border-indigo-500/50 bg-indigo-500/10 text-indigo-500",children:"Boarding"})]}),(0,a.jsxs)("p",{className:"text-sm text-muted-foreground flex items-center gap-1.5",children:[a.jsx(x.Z,{className:"h-4 w-4"}),"Driver: ",e.driverName]})]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsxs)("p",{className:"font-semibold text-lg flex items-center gap-2 justify-end",children:[a.jsx(c.Z,{className:"h-4 w-4"})," ",r]}),a.jsx("p",{className:"text-xs text-muted-foreground",children:"seats left"})]})]})})},q=({onNext:e,onBack:s,trips:t,loading:l,error:n})=>{let[i,d]=(0,r.useState)(null);return(0,a.jsxs)("div",{className:"w-full h-full flex flex-col bg-card",children:[a.jsx("div",{className:"flex-1 overflow-y-auto p-4 md:p-6 space-y-4",children:l?Array.from({length:3}).map((e,s)=>a.jsx(H.O,{className:"h-24 w-full"},s)):n?(0,a.jsxs)(Q.bZ,{variant:"destructive",children:[a.jsx(U.Z,{className:"h-4 w-4"}),a.jsx(Q.Cd,{children:"Error Fetching Departures"}),(0,a.jsxs)(Q.X,{children:[a.jsx("p",{children:"We couldn't load available trips. Here's the error from the server:"}),a.jsx("pre",{className:"mt-2 text-xs bg-muted/50 p-2 rounded-md whitespace-pre-wrap font-mono",children:n})]})]}):t.length>0?t.map(e=>a.jsx(V,{trip:e,onSelect:()=>d(e),selected:i?.id===e.id},e.id)):(0,a.jsxs)("div",{className:"text-center py-16 text-muted-foreground h-full flex flex-col items-center justify-center",children:[a.jsx(W.Z,{className:"h-16 w-16 mx-auto text-primary/20"}),a.jsx("p",{className:"text-lg font-semibold mt-4",children:"No Trips Available"}),a.jsx("p",{className:"mt-1",children:"There are no scheduled trips for this route on the selected date."}),a.jsx(o.z,{onClick:s,variant:"outline",className:"mt-4",children:"Change Date or Route"})]})}),a.jsx("footer",{className:"p-4 border-t border-border/50 bg-card shrink-0",children:a.jsx(o.z,{onClick:()=>i&&e(i),disabled:!i,className:"h-14 w-full text-lg font-bold",children:"Continue"})})]})};var K=t(9969),X=t(74064),ee=t(74723),es=t(27256),et=t(9015),ea=t(30361),er=t(56562),el=t(69971),en=t(5751),ei=t(3634),eo=t(18087),ed=t(79360),ec=t(94019);let eu=eo.fC;eo.xz,eo.x8;let em=eo.h_,ex=r.forwardRef(({className:e,...s},t)=>a.jsx(eo.aV,{className:(0,g.cn)("fixed inset-0 z-50 bg-black/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...s,ref:t}));ex.displayName=eo.aV.displayName;let eh=(0,ed.j)("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4 border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),ef=r.forwardRef(({side:e="right",className:s,children:t,...r},l)=>(0,a.jsxs)(em,{children:[a.jsx(ex,{}),(0,a.jsxs)(eo.VY,{ref:l,className:(0,g.cn)(eh({side:e}),s),...r,children:[t,(0,a.jsxs)(eo.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[a.jsx(ec.Z,{className:"h-4 w-4"}),a.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));ef.displayName=eo.VY.displayName;let ep=({className:e,...s})=>a.jsx("div",{className:(0,g.cn)("flex flex-col space-y-1.5 text-center sm:text-left",e),...s});ep.displayName="SheetHeader";let eg=r.forwardRef(({className:e,...s},t)=>a.jsx(eo.Dx,{ref:t,className:(0,g.cn)("text-lg font-semibold text-foreground",e),...s}));eg.displayName=eo.Dx.displayName,r.forwardRef(({className:e,...s},t)=>a.jsx(eo.dk,{ref:t,className:(0,g.cn)("text-sm text-muted-foreground",e),...s})).displayName=eo.dk.displayName;var ej=t(58451),eb=t(76),ey=t(55296),eN=t(47548),ew=t(33469),ev=t(46226);let eC=e=>a.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",width:"100%",height:"100%",version:"1.1",style:{shapeRendering:"geometricPrecision",textRendering:"geometricPrecision",imageRendering:"optimizeQuality",fillRule:"evenodd",clipRule:"evenodd"},viewBox:"0 0 770.7 1075.04",...e,children:(0,a.jsxs)("g",{children:[a.jsx("path",{style:{fill:"currentColor"},d:"M64.57 789.5c-83.03,30.85 -99.56,155.85 32.08,255.69 40.83,30.97 46.85,29.9 108.58,29.82l413.06 -0.2c32.46,-3.57 209.54,-118.1 133.71,-248.16 -15.5,-26.59 -46.91,-52.34 -92.26,-37.62 -52.72,17.11 -23.7,42.06 -93.6,41.35 -91.66,-0.93 -183.75,-0.09 -275.46,-0.09 -35.23,0 -103.39,10.98 -126.57,-9.14 -16.82,-14.59 -14.95,-19.93 -40.46,-30.32 -22.13,-9.01 -36.34,-9.79 -59.07,-1.35z"}),a.jsx("path",{style:{fill:"currentColor"},d:"M283.35 213.49l-0.37 53.11 -46.73 0.17 0.1 229.2 301.6 0 0.74 -229.23 -45.57 -0.01 -1.12 -53.48c97.99,-0.63 64.17,-60.44 48.32,-134.1 -19.23,-89.34 -17.4,-78.33 -149.97,-78.33 -25.53,0 -91.64,-3.02 -112.45,2.57 -31.45,8.45 -33.62,36.99 -41.49,72.78 -16.33,74.35 -52.41,135.21 46.93,137.32zm99.13 -63.04c2.26,-2.98 4.61,-6.33 6.96,-9.95l-7.7 1.71 -0.06 -2.88 10.25 -2.77 0.61 -1 -10.62 2.65 -0.09 -6.53 15.51 -4.61 -0.09 0.26c0.38,-0.72 0.77,-1.44 1.15,-2.16l-11.2 2.83 -0.2 -4.18 14.21 -4.28c0.23,-0.48 0.45,-0.96 0.67,-1.44l-14.58 4.09 -0.41 -9.49 19.81 -6.51c2.73,-7.9 4.43,-15.72 4.43,-22.81 0,-1.06 -0.06,-2.11 -0.17,-3.15 -0.48,0.08 -1.05,0.08 -1.72,-0.03 0.03,0.47 0.04,0.94 0.04,1.42 0,13.73 -11.13,24.87 -24.87,24.87 -13.73,0 -24.87,-11.13 -24.87,-24.87 0,-13.73 11.13,-24.87 24.87,-24.87 3.05,0 5.96,0.55 8.66,1.55 0.02,-0.58 -0.01,-1.19 -0.08,-1.82 -3.35,-1.35 -7.01,-2.1 -10.85,-2.1 -14.28,0 -26.16,10.34 -28.55,23.94 -1.84,10.47 3.74,25.87 10.88,40.41l21.2 -5.84 0.27 3.87 -18.52 5.3 0.63 1.79 17.86 -5.31 0.26 4.19 -17.25 4.63c0.28,0.51 0.55,1.03 0.83,1.53l16.42 -4.78 0.18 3.97 -14.64 4.35 0.8 1.42 8.47 -2.07 0.11 2.67 -7.18 1.83 0.65 1.12 6.48 -1.72 0.09 2.88 -5.17 1.23 0.55 0.92 4.59 -1.19 0.05 2.74 -3.2 0.85c1.65,2.73 3.18,5.2 4.51,7.34zm11.94 -18.03c0.28,-0.49 0.56,-0.98 0.84,-1.47l-9.86 2.5 -0.01 1.19 9.01 -2.35 0.01 0.13zm9.52 -19c0.26,-0.62 0.52,-1.25 0.77,-1.88l-12.56 3.58 0.04 1.73 11.75 -3.44zm-5.94 -60.98c2.2,15.39 11.52,20.08 24.2,19.75 -15.45,1.09 -24.12,7.11 -24.2,19.75 1.75,-14.76 -10.17,-18.13 -24.2,-19.75 14.11,0.94 22.11,-5.65 24.2,-19.75z"}),a.jsx("polygon",{style:{fill:"currentColor"},points:"241.03,812.45 537.64,812.58 538.78,533.05 228.96,533.05 238.59,533.05 "}),a.jsx("path",{style:{fill:"currentColor"},d:"M574.7 812.87c49.15,1.06 15.33,-33.15 118.8,-47.74 2.08,-43.39 -35.3,-202.3 -37.04,-269.92 -2.38,-92.08 26.79,-225 -80.64,-226.88l-1.11 544.54z"}),a.jsx("path",{style:{fill:"currentColor"},d:"M94.11 763.32c21.52,9.4 34.45,8.26 54.65,20.82 24.84,15.45 17.76,28.41 50.96,27.7l1.12 -542.06c-98.29,6.45 -66.14,140.56 -75.18,225.94 -11.54,108.89 -46.52,137.11 -31.55,267.61z"}),a.jsx("polygon",{style:{fill:"hsl(var(--card))"},points:"326.83,248.35 327.5,266.75 447.99,266.71 448.92,213.45 428.33,213.18 326.83,213.22 "})]})});var ek=t(98150);let eM=es.Ry({passengerName:es.Z_().min(2,"Name is required."),passengerPhone:es.Z_().min(10,"Please enter a valid phone number."),seats:es.IX(es.Rx()).min(1,"Please select at least one seat."),passengers:es.IX(es.Ry({name:es.Z_().min(2,"Passenger name is required.")})).optional(),paymentMethod:es.Z_({required_error:"Please select a payment method."})}),eD=({number:e,label:s,status:t,onSelect:r,className:l})=>{let n="available"===t;return(0,a.jsxs)("button",{type:"button",onClick:()=>n&&r(e),disabled:!n,className:(0,g.cn)("relative flex flex-col items-center justify-center aspect-square w-full rounded-lg font-semibold transition-all duration-200 transform",{available:"border-2 border-dashed border-muted-foreground/30 hover:border-primary hover:bg-primary/10 text-muted-foreground cursor-pointer hover:scale-105",taken:"bg-muted text-muted-foreground/50 cursor-not-allowed",selected:"bg-primary border-primary text-primary-foreground cursor-default scale-110 shadow-lg shadow-primary/40",held:"bg-yellow-500/20 text-yellow-500 cursor-not-allowed border-yellow-500/50"}[t],l),children:[a.jsx(eC,{className:(0,g.cn)("w-3/4 h-3/4","selected"===t?"text-white":"text-current")}),a.jsx("span",{className:"text-[10px] sm:text-xs mt-1",children:s}),"taken"===t&&(0,a.jsxs)("div",{className:"absolute inset-0 flex items-center justify-center",children:[a.jsx("div",{className:"w-3/4 h-0.5 bg-destructive/50 rotate-45 absolute"}),a.jsx("div",{className:"w-3/4 h-0.5 bg-destructive/50 -rotate-45 absolute"})]})]})},eA=({isOpen:e,onOpenChange:s,selectedValue:t,onSelect:r,userBalance:l,isGuest:n})=>{let i=[{name:"Wallet",icon:C.Z,details:n?"Login Required":new Intl.NumberFormat("en-NG",{style:"currency",currency:"NGN"}).format(l),disabled:n},{name:"Pay with Paystack",icon:p.Z,details:"Card, Bank, or USSD"}];return a.jsx(eu,{open:e,onOpenChange:s,children:(0,a.jsxs)(ef,{side:"bottom",className:"rounded-t-2xl bg-card",children:[a.jsx(ep,{className:"text-left mb-4",children:a.jsx(eg,{className:"text-xl",children:"Choose Payment Method"})}),a.jsx("div",{className:"space-y-2",children:i.map(e=>(0,a.jsxs)("button",{type:"button",onClick:()=>!e.disabled&&r(e.name),disabled:e.disabled,className:(0,g.cn)("flex w-full items-center rounded-lg p-4 text-left transition-colors hover:bg-muted",t===e.name&&"bg-primary/10 border-primary/50 border",e.disabled&&"opacity-50 cursor-not-allowed"),children:[a.jsx(e.icon,{className:(0,g.cn)("h-6 w-6 text-primary mr-4",e.disabled&&"text-muted-foreground")}),(0,a.jsxs)("div",{className:"flex-1",children:[a.jsx("p",{className:"font-semibold text-base",children:e.name}),a.jsx("p",{className:"text-sm text-muted-foreground",children:e.details})]}),e.disabled?a.jsx(et.Z,{className:"h-5 w-5 text-muted-foreground"}):t===e.name&&a.jsx(ea.Z,{className:"h-6 w-6 text-primary"})]},e.name))})]})})},eS=e=>{if(!e)return null;if(e instanceof Date)return e;if(e instanceof eb.EK)return e.toDate();if("string"==typeof e){let s=new Date(e);if(!isNaN(s.getTime()))return s}return void 0!==e.seconds&&void 0!==e.nanoseconds?new eb.EK(e.seconds,e.nanoseconds).toDate():null},eI=({onNext:e,onBack:s,initialData:t,scheduledTrip:l,opsSettings:i,updateFormData:u,countdown:h,seatHoldExpires:f,setSeatHoldExpires:g,currentTripState:b,setCurrentTripState:y,guestId:w})=>{let{user:v}=(0,ej.aC)(),C=(0,ej.CU)(),[k,M]=(0,r.useState)(!1),[D,A]=(0,r.useState)(null),[S,I]=(0,r.useState)(!1),L=(0,r.useRef)(null),[T,Z]=(0,r.useState)(!1),{data:P,loading:z}=(0,ej.kh)("settings/vehicleShowcase"),E=(0,ee.cI)({resolver:(0,X.F)(eM),defaultValues:t});(0,r.useEffect)(()=>{E.reset(t)},[t,E]);let R=E.watch("seats")||[],{fields:F,append:Y,remove:O}=(0,ee.Dq)({control:E.control,name:"passengers"});(0,r.useEffect)(()=>{let e=R?.length||0,s=e>1?e-1:0;if(F.length<s)for(let e=F.length;e<s;e++)Y({name:""});else if(F.length>s)for(let e=F.length-1;e>=s;e--)O(e)},[R,F.length,Y,O]);let B=(0,r.useCallback)(async e=>{if(e.length>0&&C){let s=(0,eb.JU)(C,"scheduledTrips",l.id),t={};e.forEach(e=>{t[`seatHolds.${e}`]=(0,eb.AK)()});try{await (0,eb.r7)(s,t)}catch(e){console.error("Failed to release holds on cleanup:",e)}}},[C,l.id]),_=(0,r.useCallback)(e=>{let s=b||l;if(s.bookedSeats?.includes(e))return"taken";if(R?.includes(e))return"selected";let t=(s.seatHolds||{})[e];if(t){let e=eS(t.expires);if(e&&e>new Date)return"held"}return"available"},[R,l,b]),G=(0,r.useCallback)(e=>{let s=_(e);"available"===s?A(e):"selected"===s&&(u({seats:R.filter(s=>s!==e)}),B([e]))},[_,R,u,B]),U=(0,r.useCallback)(async()=>{if(null===D)return;I(!0);let e=(0,eb.JU)(C,"scheduledTrips",l.id),s=`seatHolds.${D}`,t=v?.id||w;if(!t){n.Am.error("Session expired",{description:"Please refresh the page and try again."}),I(!1);return}try{let a=f;if(!a||h.isFinished){let e=i?.seatHoldDuration||5;a=new Date(new Date().getTime()+6e4*e),g(a)}await (0,eb.r7)(e,{[s]:{userId:t,expires:eb.EK.fromDate(a)}}),u({seats:[...R,D]}),A(null)}catch(e){console.error(e),n.Am.error("Seat Selection Failed",{description:"Could not update seat status. Please try again."})}finally{I(!1)}},[D,C,l.id,v,w,f,h.isFinished,i,g,u,R]);(0,r.useEffect)(()=>{let e=(0,eb.JU)(C,"scheduledTrips",l.id),s=(0,eb.cf)(e,e=>{if(e.exists()){let s={id:e.id,...e.data()};y(s);let t=v?.id||w,a=Object.entries(s.seatHolds||{}).filter(([e,s])=>{let a=eS(s.expires);return s.userId===t&&a&&a>new Date}).map(([e])=>parseInt(e));if(JSON.stringify((R||[]).sort())!==JSON.stringify(a.sort())&&u({seats:a}),a.length>0){let e=s.seatHolds?.[a[0]],t=eS(e?.expires);t&&t>new Date&&g(t)}else g(null)}});return()=>s()},[l.id,C,v,w,u,g,R,y]),(0,r.useEffect)(()=>{h.isFinished&&f&&(n.Am.info("Seat hold expired",{description:"Your selected seats have been released."}),B(R),u({seats:[]}),g(null))},[h.isFinished,f,B,u,R]),(0,r.useEffect)(()=>{let e=new IntersectionObserver(([e])=>{Z(!e.isIntersecting)},{root:null,threshold:0}),s=L.current;return s&&e.observe(s),()=>{s&&e.unobserve(s)}},[]);let J=(0,r.useCallback)(s=>{u(s),e(s)},[e,u]),Q=E.watch("paymentMethod"),V=(R?.length||0)*((b||l)?.fare||0);return(0,a.jsxs)("div",{className:"h-full flex flex-col bg-card",children:[f&&!h.isFinished&&T&&a.jsx("div",{className:"fixed top-20 right-4 z-50 p-2 rounded-full bg-yellow-500/20 text-yellow-500 border border-yellow-500/30 flex items-center justify-center h-16 w-16 shadow-lg",children:(0,a.jsxs)("div",{className:"flex flex-col items-center",children:[(0,a.jsxs)("span",{className:"font-bold text-lg leading-none",children:[h.minutes,":",String(h.seconds).padStart(2,"0")]}),a.jsx("span",{className:"text-[10px]",children:"left"})]})}),a.jsx(K.l0,{...E,children:(0,a.jsxs)("form",{onSubmit:E.handleSubmit(J),className:"h-full flex flex-col",children:[(0,a.jsxs)("div",{className:"flex-1 space-y-6 p-4 md:p-6 overflow-y-auto",children:[a.jsx("div",{ref:L,children:f&&!h.isFinished&&a.jsx("div",{className:"p-4 rounded-xl bg-yellow-500/10 text-yellow-500 border border-yellow-500/20 text-center",children:(0,a.jsxs)("div",{className:"flex items-center justify-center gap-2 font-bold text-base",children:[a.jsx($.Z,{className:"h-5 w-5"})," Seats reserved for ",h.minutes,":",String(h.seconds).padStart(2,"0")]})})}),a.jsx(eN.lr,{plugins:[(0,ew.Z)({delay:4e3,stopOnInteraction:!1})],className:"w-full",children:a.jsx(eN.KI,{children:z?a.jsx(eN.d$,{children:a.jsx(H.O,{className:"aspect-video w-full"})}):P?.images&&P.images.length>0?P.images.map(e=>a.jsx(eN.d$,{children:a.jsx("div",{className:"aspect-video relative rounded-xl overflow-hidden",children:a.jsx(ev.default,{src:e.src,alt:e.alt,fill:!0,className:"object-cover","data-ai-hint":e.hint,unoptimized:!0,onError:e=>{let s=e.target;s.style.display="none";let t=s.parentElement;t&&(t.innerHTML='<div class="flex items-center justify-center h-full bg-muted"><svg class="h-16 w-16 text-muted-foreground" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z" /></svg></div>')}})})},e.id)):a.jsx(eN.d$,{children:a.jsx("div",{className:"aspect-video relative rounded-xl overflow-hidden bg-muted flex items-center justify-center",children:a.jsx(W.Z,{className:"h-16 w-16 text-muted-foreground"})})})})}),(0,a.jsxs)(N.Zb,{children:[(0,a.jsxs)(N.Ol,{children:[a.jsx(N.ll,{children:"Vehicle Details"}),a.jsx(N.SZ,{children:l.routeName})]}),(0,a.jsxs)(N.aY,{className:"grid grid-cols-2 sm:grid-cols-4 gap-4 text-center text-xs text-muted-foreground",children:[(0,a.jsxs)("div",{className:"flex flex-col items-center gap-1",children:[a.jsx(er.Z,{})," Music"]}),(0,a.jsxs)("div",{className:"flex flex-col items-center gap-1",children:[a.jsx(el.Z,{})," Bottled Water"]}),(0,a.jsxs)("div",{className:"flex flex-col items-center gap-1",children:[a.jsx(en.Z,{})," Snack Pack"]}),(0,a.jsxs)("div",{className:"flex flex-col items-center gap-1",children:[a.jsx(ei.Z,{})," Charging Port"]})]})]}),a.jsx(K.Wi,{control:E.control,name:"seats",render:()=>(0,a.jsxs)(K.xJ,{children:[(0,a.jsxs)("div",{className:"text-center bg-muted/30 rounded-xl p-4",children:[(0,a.jsxs)("h3",{className:"font-bold flex items-center justify-center gap-2",children:[a.jsx(c.Z,{className:"h-5 w-5"})," Select Your Seat(s)"]}),a.jsx("p",{className:"text-sm text-muted-foreground",children:"Tap a seat to reserve it."})]}),a.jsx(N.aY,{className:"p-4 sm:p-6 flex flex-col items-center gap-6",children:a.jsx("div",{className:"p-4 bg-muted/50 rounded-xl w-full max-w-[280px] sm:max-w-xs mx-auto",children:(0,a.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{className:"relative flex flex-col items-center justify-center aspect-square w-full rounded-lg font-semibold bg-muted text-muted-foreground/50 cursor-not-allowed",children:[a.jsx(eC,{className:"w-3/4 h-3/4 text-current"}),a.jsx("span",{className:"text-[10px] sm:text-xs mt-1",children:"Driver"})]}),a.jsx("div",{}),a.jsx(eD,{number:1,label:"Front",status:_(1),onSelect:()=>G(1)}),a.jsx(eD,{number:2,label:"P1",status:_(2),onSelect:()=>G(2)}),a.jsx(eD,{number:3,label:"P2",status:_(3),onSelect:()=>G(3)}),a.jsx(eD,{number:4,label:"P3",status:_(4),onSelect:()=>G(4)}),a.jsx(eD,{number:5,label:"P4",status:_(5),onSelect:()=>G(5)}),a.jsx(eD,{number:6,label:"P5",status:_(6),onSelect:()=>G(6)}),a.jsx(eD,{number:7,label:"P6",status:_(7),onSelect:()=>G(7)})]})})}),a.jsx(K.zG,{className:"text-center pt-2"})]})}),(0,a.jsxs)(N.Zb,{children:[(0,a.jsxs)(N.Ol,{children:[(0,a.jsxs)(N.ll,{className:"flex items-center gap-2",children:[a.jsx(x.Z,{className:"h-5 w-5 text-primary"})," Lead Passenger & Contact"]}),a.jsx(N.SZ,{children:"This person's details will be used for all trip communication and they will be counted as the first passenger."})]}),(0,a.jsxs)(N.aY,{className:"space-y-4",children:[a.jsx(K.Wi,{control:E.control,name:"passengerName",render:({field:e})=>(0,a.jsxs)(K.xJ,{children:[a.jsx(K.lX,{children:"Full Name"}),a.jsx(K.NI,{children:a.jsx(j.I,{...e})}),a.jsx(K.zG,{})]})}),a.jsx(K.Wi,{control:E.control,name:"passengerPhone",render:({field:e})=>(0,a.jsxs)(K.xJ,{children:[a.jsx(K.lX,{children:"Phone Number"}),a.jsx(K.NI,{children:a.jsx(ek.s,{...e,control:E.control})}),a.jsx(K.zG,{})]})})]})]}),F.length>0&&(0,a.jsxs)(N.Zb,{children:[(0,a.jsxs)(N.Ol,{children:[a.jsx(N.ll,{children:"Additional Passenger Details"}),a.jsx(N.SZ,{children:"Please provide the names for each additional passenger."})]}),a.jsx(N.aY,{className:"space-y-4",children:F.map((e,s)=>a.jsx(K.Wi,{control:E.control,name:`passengers.${s}.name`,render:({field:e})=>(0,a.jsxs)(K.xJ,{children:[(0,a.jsxs)(K.lX,{children:["Passenger ",s+2," Name"]}),a.jsx(K.NI,{children:a.jsx(j.I,{...e})}),a.jsx(K.zG,{})]})},e.id))})]}),a.jsx(K.Wi,{control:E.control,name:"paymentMethod",render:()=>(0,a.jsxs)(K.xJ,{children:[a.jsx(N.Zb,{className:"cursor-pointer hover:bg-muted",onClick:()=>M(!0),children:a.jsx(N.aY,{className:"p-4",children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("h3",{className:"font-bold flex items-center gap-2",children:[a.jsx(p.Z,{className:"h-5 w-5"})," Payment Method"]}),a.jsx("p",{className:"text-sm text-muted-foreground",children:Q||"Select a payment method"})]}),a.jsx(d.Z,{className:"h-5 w-5 text-muted-foreground"})]})})}),a.jsx(K.zG,{className:"text-center pt-2"})]})})]}),(0,a.jsxs)("footer",{className:"p-4 border-t border-border/50 bg-card shrink-0 space-y-3",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center text-center w-full",children:[(0,a.jsxs)("p",{className:"text-sm text-muted-foreground",children:["Total Fare (",R.length," seat",1!==R.length?"s":"",")"]}),a.jsx("p",{className:"text-xl font-bold",children:new Intl.NumberFormat("en-NG",{style:"currency",currency:"NGN"}).format(V)})]}),a.jsx(o.z,{type:"submit",className:"h-14 w-full text-lg font-bold",children:"Continue to Confirmation"})]})]})}),a.jsx(ey.aR,{open:null!==D,onOpenChange:e=>!e&&A(null),children:(0,a.jsxs)(ey._T,{children:[(0,a.jsxs)(ey.fY,{children:[a.jsx(ey.f$,{children:"Confirm Seat Selection"}),a.jsx(ey.yT,{children:"Once confirmed, this seat will be locked and cannot be unselected until the timer expires. Do you wish to proceed?"})]}),(0,a.jsxs)(ey.xo,{children:[a.jsx(ey.le,{onClick:()=>A(null),children:"Cancel"}),(0,a.jsxs)(ey.OL,{onClick:U,disabled:S,children:[S&&a.jsx(m.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Confirm"]})]})]})}),a.jsx(eA,{isOpen:k,onOpenChange:M,selectedValue:Q,onSelect:e=>{E.setValue("paymentMethod",e,{shouldValidate:!0}),M(!1)},userBalance:v?.walletBalance||0,isGuest:!v})]})};var eL=t(60763),eT=t(47850);let eZ=({feature:e})=>{let s={"Onboard WiFi":M.Z,"Bottled Water":el.Z,"Snack Pack":en.Z,"Security Escort":eL.Z,"Charging Ports":ei.Z,"Music System":er.Z,"Custom Decorations":eT.Z}[e.name]||W.Z;return(0,a.jsxs)("div",{className:(0,g.cn)("flex items-center gap-2","included"===e.status?"text-primary":"text-muted-foreground"),children:[a.jsx(s,{className:"h-4 w-4"}),a.jsx("span",{className:"text-sm",children:e.name})]})},eP=({pkg:e,onSelect:s,selected:t})=>(0,a.jsxs)(N.Zb,{onClick:s,className:(0,g.cn)("cursor-pointer hover:border-primary/50 hover:bg-primary/5 transition-all duration-200",t&&"border-primary ring-2 ring-primary"),children:[(0,a.jsxs)(N.Ol,{children:[(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[a.jsx(N.ll,{children:e.name}),t&&a.jsx(k.Z,{className:"h-6 w-6 text-primary"})]}),a.jsx(N.SZ,{children:e.description})]}),(0,a.jsxs)(N.aY,{className:"space-y-4",children:[(0,a.jsxs)("p",{children:[a.jsx("span",{className:"font-bold text-2xl",children:new Intl.NumberFormat("en-NG",{style:"currency",currency:"NGN"}).format(e.basePrice)})," ",a.jsx("span",{className:"text-muted-foreground",children:"base fare"})]}),a.jsx("div",{className:"space-y-2",children:e.features&&e.features.length>0&&e.features.map((e,s)=>a.jsx(eZ,{feature:e},s))})]})]}),ez=({onNext:e,packages:s})=>{let[t,l]=(0,r.useState)(null),n=e=>{l(e)};return(0,a.jsxs)("div",{className:"w-full h-full flex flex-col bg-card",children:[a.jsx("main",{className:"flex-1 overflow-y-auto p-4 md:p-6 space-y-4",children:s.length>0?s.map(e=>a.jsx(eP,{pkg:e,onSelect:()=>n(e),selected:t?.id===e.id},e.id)):(0,a.jsxs)("div",{className:"text-center py-16 text-muted-foreground border-2 border-dashed rounded-lg",children:[a.jsx(W.Z,{className:"h-16 w-16 mx-auto text-primary/20"}),a.jsx("p",{className:"text-lg font-semibold mt-4",children:"No Charter Packages Found"}),a.jsx("p",{className:"mt-1 max-w-xs mx-auto",children:"This service is not yet available. The administrator has not configured any charter packages."})]})}),a.jsx("footer",{className:"p-4 border-t border-border/50 bg-card shrink-0",children:a.jsx(o.z,{onClick:()=>{t&&e({...t})},disabled:!t,className:"h-14 w-full text-lg font-bold",children:"Continue"})})]})};var eE=t(82015),eR=t(1572),eF=t(73326);let eY=es.Ry({passengerName:es.Z_().min(2,"Name is too short."),passengerPhone:es.Z_().min(10,"Please enter a valid phone number."),travelDate:es.hT({required_error:"A travel date is required."}),charterDays:es.oQ.number().min(1,"Charter must be for at least 1 day."),specialInstructions:es.Z_().optional(),features:es.IX(es.Ry({id:es.Z_(),name:es.Z_(),price:es.Rx(),status:es.Km(["included","optional"]),selected:es.O7().optional()})).optional()}),eO=({name:e,label:s,price:t,control:r,index:l})=>a.jsx(K.Wi,{control:r,name:e,render:({field:e})=>(0,a.jsxs)(K.xJ,{className:"flex items-center justify-between rounded-lg border p-3",children:[(0,a.jsxs)("div",{children:[a.jsx(K.lX,{htmlFor:`feature-toggle-${l}`,className:"font-medium flex items-center gap-2",children:s}),(0,a.jsxs)("p",{className:"text-xs text-primary font-semibold",children:["+ ",new Intl.NumberFormat("en-NG",{style:"currency",currency:"NGN"}).format(t)]})]}),a.jsx(K.NI,{children:a.jsx(eF.r,{id:`feature-toggle-${l}`,checked:e.value,onCheckedChange:e.onChange})})]})}),eB=({onNext:e,onBack:s,initialData:t})=>{let r=(0,ee.cI)({resolver:(0,X.F)(eY),defaultValues:{...t,travelDate:t.travelDate?new Date(t.travelDate):new Date,charterDays:t.charterDays||1,features:t.features?.map(e=>({...e,selected:!1}))||[]}}),{fields:l}=(0,ee.Dq)({control:r.control,name:"features"}),n=l.filter(e=>"optional"===e.status);return a.jsx("div",{className:"h-full flex flex-col bg-card",children:a.jsx(K.l0,{...r,children:(0,a.jsxs)("form",{onSubmit:r.handleSubmit(s=>{e({...s,travelDate:s.travelDate.toISOString()})}),className:"h-full flex flex-col",children:[(0,a.jsxs)("main",{className:"flex-1 space-y-6 p-4 md:p-6 overflow-y-auto",children:[(0,a.jsxs)(N.Zb,{children:[(0,a.jsxs)(N.Ol,{children:[(0,a.jsxs)(N.ll,{className:"flex items-center gap-2",children:[a.jsx(x.Z,{className:"h-5 w-5 text-primary"})," Booking Contact"]}),a.jsx(N.SZ,{children:"Who should we contact about this booking?"})]}),(0,a.jsxs)(N.aY,{className:"space-y-4",children:[a.jsx(K.Wi,{control:r.control,name:"passengerName",render:({field:e})=>(0,a.jsxs)(K.xJ,{children:[a.jsx(K.lX,{children:"Full Name"}),a.jsx(K.NI,{children:a.jsx(j.I,{...e})}),a.jsx(K.zG,{})]})}),a.jsx(K.Wi,{control:r.control,name:"passengerPhone",render:({field:e})=>(0,a.jsxs)(K.xJ,{children:[a.jsx(K.lX,{children:"Phone Number"}),a.jsx(K.NI,{children:a.jsx(ek.s,{...e,control:r.control})}),a.jsx(K.zG,{})]})})]})]}),(0,a.jsxs)(N.Zb,{children:[(0,a.jsxs)(N.Ol,{children:[(0,a.jsxs)(N.ll,{className:"flex items-center gap-2",children:[a.jsx(f.Z,{className:"h-5 w-5 text-primary"})," Date & Duration"]}),a.jsx(N.SZ,{children:"When and for how long do you need the vehicle?"})]}),(0,a.jsxs)(N.aY,{className:"space-y-4",children:[a.jsx(K.Wi,{control:r.control,name:"travelDate",render:({field:e})=>(0,a.jsxs)(K.xJ,{className:"flex flex-col",children:[a.jsx(K.lX,{children:"Travel Start Date"}),(0,a.jsxs)(_.J2,{children:[a.jsx(_.xo,{asChild:!0,children:a.jsx(K.NI,{children:(0,a.jsxs)(o.z,{variant:"outline",className:(0,g.cn)("h-12 w-full justify-start text-left font-normal text-base",!e.value&&"text-muted-foreground"),children:[a.jsx(f.Z,{className:"mr-2 h-4 w-4"}),e.value?(0,O.WU)(e.value,"PPP"):a.jsx("span",{children:"Pick a date"})]})})}),a.jsx(_.yk,{className:"w-auto p-0",align:"start",children:a.jsx(B.f,{mode:"single",selected:e.value,onSelect:e.onChange,disabled:e=>e<new Date(new Date().setHours(0,0,0,0)),initialFocus:!0})})]}),a.jsx(K.zG,{})]})}),a.jsx(K.Wi,{control:r.control,name:"charterDays",render:({field:e})=>(0,a.jsxs)(K.xJ,{children:[a.jsx(K.lX,{children:"Number of Days"}),a.jsx(K.NI,{children:a.jsx(j.I,{type:"number",min:"1",...e})}),a.jsx(K.zG,{})]})})]})]}),n.length>0&&(0,a.jsxs)(N.Zb,{children:[(0,a.jsxs)(N.Ol,{children:[(0,a.jsxs)(N.ll,{className:"flex items-center gap-2",children:[a.jsx(eR.Z,{className:"h-5 w-5 text-primary"})," Optional Add-ons"]}),a.jsx(N.SZ,{children:"Select any additional services you require."})]}),a.jsx(N.aY,{className:"space-y-4",children:a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:l.map((e,s)=>"optional"===e.status?a.jsx(eO,{name:`features.${s}.selected`,label:e.name,price:e.price,control:r.control,index:s},e.id):null)})})]}),(0,a.jsxs)(N.Zb,{children:[a.jsx(N.Ol,{children:a.jsx(N.ll,{children:"Additional Requests"})}),a.jsx(N.aY,{children:a.jsx(K.Wi,{control:r.control,name:"specialInstructions",render:({field:e})=>(0,a.jsxs)(K.xJ,{children:[a.jsx(K.lX,{children:"Other Requests (Optional)"}),a.jsx(K.NI,{children:a.jsx(eE.g,{placeholder:"e.g., Please ensure the vehicle is decorated for a wedding.",...e})}),a.jsx(K.zG,{})]})})})]})]}),a.jsx("footer",{className:"p-4 border-t border-border/50 bg-card shrink-0",children:a.jsx(o.z,{type:"submit",className:"h-14 w-full text-lg font-bold",children:"Continue to Confirmation"})})]})})})};var e_=t(92532),eG=t(39917),e$=t(59382),eU=t(48217),eW=t(19819),eH=t(19574),eJ=t(49423);let eQ=({icon:e,title:s,value:t,onEdit:r,children:l})=>(0,a.jsxs)("div",{onClick:r,className:(0,g.cn)("flex items-start gap-4 p-4 rounded-xl bg-muted/50 border border-border/50",r&&"cursor-pointer hover:bg-muted"),children:[a.jsx("div",{className:"flex-shrink-0 mt-1",children:e}),(0,a.jsxs)("div",{className:"flex-1",children:[a.jsx("p",{className:"font-bold",children:s}),t&&a.jsx("p",{className:"text-sm text-muted-foreground",children:t}),l]}),r&&a.jsx(d.Z,{className:"h-5 w-5 text-muted-foreground self-center"})]}),eV=({data:e,onConfirm:s,onBack:t,onEdit:r,isCalculatingPrice:l,onCouponChange:n})=>{let i=e.charterBasePrice||0;e.charterDailyRate;let d=e.charterDays||1,c=e.features?.filter(e=>"optional"===e.status&&e.selected)||[],h=c.reduce((e,s)=>e+s.price,0),p=e.price||0;return(0,a.jsxs)("div",{className:"h-full flex flex-col bg-card",children:[(0,a.jsxs)("main",{className:"flex-1 space-y-4 p-4 md:p-6 overflow-y-auto",children:[a.jsx(eQ,{icon:a.jsx(W.Z,{className:"text-primary h-6 w-6"}),title:e.charterPackageName||"Charter Package",value:"Your selected premium package.",onEdit:()=>r(0)}),a.jsx(eQ,{icon:a.jsx(x.Z,{className:"text-primary h-6 w-6"}),title:e.passengerName||"Booking Contact",value:e.passengerPhone||"Not set",onEdit:()=>r(1)}),a.jsx(eQ,{icon:a.jsx(f.Z,{className:"text-primary h-6 w-6"}),title:"Trip Start Date",value:e.travelDate?new Date(e.travelDate).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"Not set",onEdit:()=>r(1)}),a.jsx(eQ,{icon:a.jsx(eJ.Z,{className:"text-primary h-6 w-6"}),title:"Duration",value:`${e.charterDays||1} day(s)`,onEdit:()=>r(1)}),c.length>0&&a.jsx(eQ,{icon:a.jsx(eR.Z,{className:"text-primary h-6 w-6"}),title:"Selected Add-ons",onEdit:()=>r(1),children:a.jsx("ul",{className:"text-sm text-muted-foreground space-y-1 mt-1",children:c.map(e=>(0,a.jsxs)("li",{className:"flex justify-between",children:[a.jsx("span",{children:e.name}),(0,a.jsxs)("span",{className:"font-semibold text-foreground/80",children:["+ ",new Intl.NumberFormat("en-NG",{style:"currency",currency:"NGN"}).format(e.price)]})]},e.id))})}),(0,a.jsxs)("div",{className:"p-4 rounded-xl bg-muted/50 border border-border/50 space-y-2",children:[(0,a.jsxs)("label",{className:"font-bold flex items-center gap-2",children:[a.jsx(u.Z,{className:"text-primary h-5 w-5"})," Coupon Code"]}),a.jsx(j.I,{placeholder:"Enter coupon code (optional)",onChange:e=>n(e.target.value),defaultValue:e.couponCode})]})]}),(0,a.jsxs)("footer",{className:"p-4 border-t border-border/50 bg-card space-y-3 shrink-0",children:[(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Quoted Fare"}),a.jsx("p",{className:"text-3xl font-bold",children:new Intl.NumberFormat("en-NG",{style:"currency",currency:"NGN"}).format(p)}),(0,a.jsxs)("p",{className:"text-xs text-muted-foreground",children:["(Base: ",new Intl.NumberFormat("en-NG",{style:"currency",currency:"NGN"}).format(i),d>1&&` + ${d-1} extra day(s)`,h>0&&" + Add-ons",")"]})]}),a.jsx(o.z,{onClick:s,className:"h-14 w-full text-lg font-bold",disabled:l,children:l?(0,a.jsxs)(a.Fragment,{children:[a.jsx(m.Z,{className:"mr-2 h-5 w-5 animate-spin"}),"Processing..."]}):"Confirm & Get Quote"})]})]})},eq=e=>{let s={};for(let t in e)void 0!==e[t]&&(s[t]=e[t]);return s},eK=()=>{let e=(0,i.useRouter)(),s=(0,i.useSearchParams)(),{user:t,firestore:d,firebaseUser:c}=(0,l.a)(),{showPreloader:u}=(0,eW.l)(),m=(0,r.useMemo)(()=>{try{let e=s?.get("bookingType")??null;return"seat_booking"===e||"charter"===e?e:"seat_booking"}catch{return"seat_booking"}},[s]),x=(0,r.useMemo)(()=>{try{return s?.get("draftId")??null}catch{return null}},[s]),[h,f]=(0,r.useState)(0),[p,g]=(0,r.useState)(null),[j,b]=(0,r.useState)(!1),[w,v]=(0,r.useState)(null),[C,k]=(0,r.useState)(!0),[M,D]=(0,r.useState)(null),[A,S]=(0,r.useState)(null),[I,L]=(0,r.useState)([]),[T,Z]=(0,r.useState)([]),[P,z]=(0,r.useState)([]),[F,Y]=(0,r.useState)([]),[O,B]=(0,r.useState)(null),[_,$]=(0,r.useState)(null),[W,H]=(0,r.useState)(null),[J,Q]=(0,r.useState)(null),[V,K]=(0,r.useState)(null),[X]=(0,r.useState)(()=>t?null:`guest_${Math.random().toString(36).substring(2,10)}`),[ee,es]=(0,r.useState)({bookingType:m,paymentMethod:"Pay with Paystack"}),et=(0,r.useCallback)(e=>{es(s=>({...s,...e}))},[]),[ea]=(0,eG.Nr)(ee,1e3),er=(0,eH.a)(V),el=(0,r.useCallback)(async e=>{if(e.length>0&&d&&O){let s=(0,eb.JU)(d,"scheduledTrips",O.id),t={};e.forEach(e=>{t[`seatHolds.${e}`]=(0,eb.AK)()});try{await (0,eb.r7)(s,t)}catch(e){console.error("Failed to release holds on cleanup:",e)}}},[d,O]);(0,r.useEffect)(()=>()=>{ee.seats&&ee.seats.length>0&&el(ee.seats)},[]);let en=(0,r.useCallback)(async()=>{if(t&&d)try{let e=(0,eb.JU)(d,"drafts",`${t.id}_${ee.bookingType}`);await (0,eb.oe)(e).catch(e=>console.error("Could not delete draft:",e))}catch(e){console.warn("deleteDraft error:",e)}},[t,d,ee.bookingType]),ei=(0,r.useCallback)(async(e,s,a)=>{if(b(!0),D(null),!s){D("Booking ID is missing. Please contact support."),b(!1);return}try{let r=await c?.getIdToken(),l=await fetch("charter"===a?"/api/verify-charter-payment":"/api/verify-payment",{method:"POST",headers:{"Content-Type":"application/json",...r&&{Authorization:`Bearer ${r}`}},body:JSON.stringify({reference:e.reference,bookingId:s})}),i=await l.json();if(!l.ok)throw Error(i.message||"Payment verification failed.");t&&await en(),v(i.bookingDetails),n.Am.success("Booking Confirmed!",{description:`Your trip ${i.bookingDetails.code.slice(0,10)} has been scheduled.`}),f(e=>e+1)}catch(e){console.error("Payment verification/finalization error:",e),D(e?.message||"There was an issue finalizing your booking. Please contact support.")}finally{b(!1)}},[c,t,en]),eo=(0,r.useCallback)(()=>{b(!1),n.Am.info("Payment Cancelled",{description:"Your booking is still pending. You can try to pay again from the confirmation screen."})},[]),ed=(0,r.useCallback)(async()=>{if(!d)return{unsubscribes:[]};let s=[];try{let a=(0,eU.Hu)(),r=(0,eU.Rs)(),l=fetch("/api/routes").then(e=>{if(!e.ok)throw Error("Failed to fetch routes");return e.json()}),i=new Promise((e,t)=>{let a=(0,eb.cf)((0,eb.JU)(d,"settings","charter"),s=>e(s.data()?.packages??[]),t);s.push(a)}),[o,c,u,h]=await Promise.all([a,r,l,i]);H(o),Q(c),L(u.routes),Z(u.terminals),Y(h);let p={passengerName:t?.name||"",passengerPhone:t?.phone||"",passengerEmail:t?.email||"",paymentMethod:"Pay with Paystack",bookingType:m},g=0;if(x&&t){let s=(0,eb.JU)(d,"drafts",x),a=await (0,eb.QT)(s);if(a.exists()&&a.data().userId===t.id){let e=a.data();p={...p,...e.formData??{}},g=e.step??0}else n.Am.error("Draft not found or access denied."),e.replace("/book-trip")}et(p),f(g)}catch(e){console.error("Error during initial data load:",e),D(e.message||"Failed to load booking session. Please check your connection and try again.")}finally{k(!1)}return{unsubscribes:s}},[d,t,x,m]);(0,r.useEffect)(()=>{let e=[];return k(!0),ed().then(s=>{e=s.unsubscribes}),()=>e.forEach(e=>e())},[ed]),(0,r.useEffect)(()=>{},[ea,h,w,C]),(0,r.useEffect)(()=>{if(!t||!d||C||w)return;let e=eq(ea),s={id:`${t.id}_${e.bookingType}`,userId:t.id,type:e.bookingType,lastSaved:(0,eb.Bt)(),formData:e,step:h},a=(0,eb.JU)(d,"drafts",s.id);(0,eb.pl)(a,s,{merge:!0}).catch(e=>{console.error("Failed to save draft:",e)})},[ea,h,t,d,w,C]);let ec=(0,r.useMemo)(()=>J?{publicKey:J.paystackLivePublicKey||"",email:ee.passengerEmail||"guest@example.com"}:{},[J,ee.passengerEmail]),eu=(0,e$.NL)(),em=(0,r.useCallback)(()=>f(e=>e+1),[]),ex=(0,r.useCallback)(()=>f(e=>e>0?e-1:0),[]),eh=(0,r.useCallback)(e=>{D(null),f(e)},[]),ef=(0,r.useCallback)(async e=>{b(!0),S(null);try{et(e);let s=await (0,e_.w)(e.routeId,e.travelDate);z(s||[]),s&&0!==s.length||n.Am.info("No Departures Found",{description:"There are no available departures for the selected route and date. Please try another date."}),em()}catch(e){console.error("handleLocationSubmit error:",e),S(e.message||"Could not fetch departures. Please check your connection and try again."),n.Am.error("Error Fetching Departures",{description:e.message}),em()}finally{b(!1)}},[em,et]),ep=(0,r.useCallback)(e=>{B(e),et({price:e.fare,travelDate:e.departureDate}),em()},[em,et]),eg=(0,r.useCallback)(e=>{et({...e,price:(e.seats?.length||0)*(O?.fare||0)}),em()},[em,O,et]),ej=(0,r.useCallback)(e=>{et({bookingType:"charter",charterPackageId:e.id,charterPackageName:e.name,charterBasePrice:e.basePrice,charterDailyRate:e.dailyRate,price:e.basePrice}),em()},[em,et]),ey=(0,r.useCallback)(e=>{let s=ee.charterBasePrice||0,t=ee.charterDailyRate||0,a=e.charterDays||1;et({...e,price:s+t*(a-1)}),em()},[em,et,ee.charterBasePrice,ee.charterDailyRate]),eN=(0,r.useCallback)(async e=>{b(!0),D(null);try{let s=await c?.getIdToken(),a="charter"===e.bookingType?"/api/charter-bookings":"/api/bookings",r=await fetch(a,{method:"POST",headers:{"Content-Type":"application/json",...s&&{Authorization:`Bearer ${s}`}},body:JSON.stringify({formData:e,user:t,scheduledTripId:O?.id})}),l=await r.json();if(!r.ok)throw Error(l.message||"Booking creation failed.");let n=l.bookingId,i=l.finalPrice;if(et({bookingId:n,price:i}),"Pay with Paystack"===e.paymentMethod){if(!ec.publicKey)throw Error("Payment gateway is not configured. Please contact support.");eu({config:{...ec,amount:100*i,reference:String(new Date().getTime()),metadata:{bookingId:n,bookingType:e.bookingType,userId:t?.id,customerName:e.passengerName,customerEmail:e.passengerEmail,description:`Payment for ${"charter"===e.bookingType?"Charter":"Seat"} booking`}},onSuccess:s=>ei({...s},n,e.bookingType),onClose:eo})}else if("Wallet"===e.paymentMethod)throw Error("Wallet payment is not yet implemented.")}catch(e){console.error("handleConfirmBooking error:",e),D(e?.message||"An error occurred while creating your booking.")}finally{"Pay with Paystack"!==e.paymentMethod&&b(!1)}},[c,t,O,ec,eu,ei,eo,et]),ew=(0,r.useCallback)(async()=>{t&&await en(),u(),t?e.push("/dashboard"):e.push(`/signup?tripId=${w?.code??""}`)},[t,en,e,w,u]),ev=(0,r.useCallback)(async()=>{if(t){if(O&&ee.seats&&ee.seats.length>0&&d){let e=(0,eb.JU)(d,"scheduledTrips",O.id),s={};ee.seats.forEach(e=>s[`seatHolds.${e}`]=(0,eb.AK)()),await (0,eb.r7)(e,s).catch(e=>console.error("failed to release seat holds:",e))}n.Am.success("Draft Saved!",{description:"Your booking progress has been saved. You can resume from your dashboard."}),e.push("/dashboard")}else e.push("/")},[t,O,ee,d,e]);if(C||!J)return null;if(M&&!j){let e=h===("charter"===ee.bookingType?2:3);return(0,a.jsxs)("div",{className:"h-full w-full flex flex-col items-center justify-center p-4",children:[(0,a.jsxs)("header",{className:"p-4 flex items-center justify-center relative border-b border-border/50 shrink-0 w-full max-w-lg",children:[a.jsx(o.z,{type:"button",variant:"ghost",size:"icon",onClick:()=>D(null),className:"absolute left-4 top-1/2 -translate-y-1/2",children:a.jsx(R.Z,{className:"h-5 w-5"})}),a.jsx("h1",{className:"text-xl font-bold text-destructive",children:"Booking Failed"})]}),a.jsx("div",{className:"flex-1 flex items-center justify-center w-full max-w-lg",children:a.jsx(N.Zb,{className:"w-full text-center border-destructive/50 bg-destructive/10",children:(0,a.jsxs)(N.aY,{className:"p-8 space-y-4",children:[a.jsx(U.Z,{className:"h-16 w-16 text-destructive mx-auto"}),a.jsx("h2",{className:"text-xl font-bold",children:e?"Booking Finalization Failed":"An Error Occurred"}),a.jsx("p",{className:"text-muted-foreground",children:e?"Your payment was successful, but we couldn't finalize your booking. Please see the error details below.":"An unexpected error occurred. Please try again."}),(0,a.jsxs)("div",{className:"mt-4 p-3 bg-muted/50 rounded-md text-left",children:[a.jsx("p",{className:"text-sm font-semibold",children:"Error Details:"}),a.jsx("pre",{className:"text-xs text-destructive-foreground whitespace-pre-wrap font-mono",children:M})]}),a.jsx(o.z,{onClick:()=>D(null),className:"mt-6",children:"Try Again"})]})})})]})}let eC=h!==("charter"===ee.bookingType?3:4)&&(h>0||0===h&&"charter"===ee.bookingType);return(0,a.jsxs)("div",{className:"h-full w-full max-w-lg mx-auto bg-card shadow-2xl flex flex-col",children:[eC&&(0,a.jsxs)("header",{className:"p-4 flex items-center justify-center relative border-b border-border/50 shrink-0",children:[a.jsx(o.z,{type:"button",variant:"ghost",size:"icon",onClick:ex,className:"absolute left-4 top-1/2 -translate-y-1/2",children:a.jsx(R.Z,{className:"h-5 w-5"})}),a.jsx("div",{className:"flex-1 text-center",children:a.jsx("h1",{className:"text-xl font-bold",children:(()=>{if("charter"===ee.bookingType)switch(h){case 0:return"Choose Your Charter Package";case 1:return"Charter Details";case 2:return"Confirm Charter Details";default:return"Charter Vehicle"}switch(h){case 0:return"Book Your Trip";case 1:return"Choose Departure Time";case 2:return"Select Seats & Details";case 3:return"Confirm Details";default:return"Book a Seat"}})()})}),t&&a.jsx("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 flex items-center gap-2",children:a.jsx(o.z,{variant:"outline",size:"sm",onClick:ev,children:"Save & Close"})})]}),a.jsx("div",{className:"flex-1 min-h-0",children:(()=>{if(!W)return a.jsx("div",{className:"p-8 text-center text-destructive",children:"Could not load operational settings. Please try again later."});if("charter"===ee.bookingType)switch(h){case 0:return a.jsx(ez,{packages:F,onNext:ej});case 1:return a.jsx(eB,{onBack:ex,onNext:ey,initialData:ee});case 2:return a.jsx(eV,{data:ee,onConfirm:()=>eN(ee),onBack:ex,onEdit:eh,isCalculatingPrice:j,onCouponChange:e=>et({couponCode:e})});case 3:return a.jsx(E,{booking:w,onFinish:ew,isGuest:!t});default:return null}switch(h){case 0:return a.jsx(G,{onNext:ef,initialData:ee,routes:I,terminals:T,isProcessing:j});case 1:return a.jsx(q,{trips:P,onNext:ep,onBack:ex,loading:j,error:A});case 2:return O?a.jsx(eI,{scheduledTrip:O,opsSettings:W,onNext:eg,onBack:ex,initialData:ee,updateFormData:et,countdown:er,seatHoldExpires:V,setSeatHoldExpires:K,currentTripState:_,setCurrentTripState:$,guestId:X}):null;case 3:return a.jsx(y,{data:ee,onConfirm:()=>eN(ee),onBack:ex,onEdit:eh,isCalculatingPrice:j,onCouponChange:e=>et({couponCode:e})});case 4:return a.jsx(E,{booking:w,onFinish:ew,isGuest:!t});default:return null}})()})]})},eX=()=>a.jsx(eK,{})},62539:(e,s,t)=>{t.d(s,{S:()=>g});var a=t(10326),r=t(17577),l=t.n(r),n=t(97885),i=t(29752),o=t(85086),d=t(78062),c=t(79635),u=t(81536),m=t(78151),x=t(37358),h=t(45091),f=t(6507);let p=({label:e,value:s,icon:t})=>(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{className:"text-xs text-muted-foreground uppercase tracking-wider flex items-center gap-1.5",children:[a.jsx(t,{className:"h-3 w-3"})," ",e]}),a.jsx("p",{className:"font-bold text-base",children:s||"N/A"})]}),g=l().forwardRef(({booking:e},s)=>{let t=e.travelDate?new Date(e.travelDate).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}):"N/A",r=e.travelDate?new Date(e.travelDate).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"}):"N/A",l="id"in e?e.id:e.code,g="status"in e&&["Boarding","In Transit","Completed"].includes(e.status),j=a.jsx("div",{className:"p-4 bg-background text-foreground",style:{width:"100%",maxWidth:"400px",margin:"auto"},children:(0,a.jsxs)(i.Zb,{className:"w-full border-2 border-primary/50 shadow-2xl shadow-primary/20 bg-card overflow-hidden",children:[g&&a.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/50 z-10",children:a.jsx("div",{className:"border-8 border-green-500 rounded-full p-4",children:a.jsx("span",{className:"text-5xl font-black text-green-500 transform -rotate-15",children:"VERIFIED"})})}),(0,a.jsxs)(i.Ol,{className:"text-center bg-primary/10 p-6",children:[a.jsx(o.e,{className:"h-10 w-auto mx-auto mb-2"}),a.jsx(i.ll,{className:"text-2xl",children:"Boarding Pass"}),a.jsx(i.SZ,{children:"Keep this ticket safe. You will need it to board."})]}),(0,a.jsxs)(i.aY,{className:"p-6 space-y-6",children:[a.jsx("div",{className:"flex justify-center",children:a.jsx("div",{className:"p-2 bg-white rounded-md",children:a.jsx(n.ZP,{value:l,size:128,bgColor:"#ffffff",fgColor:"#000000",level:"H",imageSettings:{src:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIHZpZXdCb3g9IjAgMCAxMC43NCAxNS4yNiI+PGcgZmlsbD0iIzAwMCI+PHBhdGggZD0iTTQuNTUgMTUuMjZjMC4zNSwtMC40NiAwLjcyLC0wLjk5IDEuMDgsLTEuNTVsLTEuMiAwLjI3IC0wLjAxIC0wLjQ1IDEuNiAtMC40MyAwLjEgLTAuMTYgLTEuNjUgMC40MSAtMC4wMSAtMS4wMiAyLjQyIC0wLjcyIC0wLjAxIDAuMDRjMC4wNiwtMC4xMSAwLjEyLC0wLjIyIDAuMTgsLTAuMzRsLTEuNzUgMC40NCAtMC4wMyAtMC42NSAyLjIxIC0wLjY3YzAuMDQsLTAuMDcgMC4wNywtMC4xNSAwLjEsLTAuMjJsLTIuMjcgMC42NCAtMC4wNiAtMS40OCAzLjA5IC0xLjAxYzAuNDMsLTEuMjMgMC42OSwtMi40NSAwLjY5LC0zLjU1IDAsLTAuMTcgLTAuMDEsLTAuMzMgLTAuMDMsLTAuNDkgLTAuMDgsMC4wMSAtMC4xNiwwLjAxIC0wLjI3LC0wIDAsMC4wNyAwLjAxLDAuMTUgMC4wMSwwLjIyIDAsMi4xNCAtMS43MywzLjg3IC0zLjg3LDMuODcgLTIuMTQsMCAtMy44NywtMS43MyAtMy44NywtMy44NyAwLC0yLjE0IDEuNzMsLTMuODcgMy44NywtMy44NyAwLjQ3LDAgMC45MywwLjA5IDEuMzUsMC4yNCAwLC0wLjA5IC0wLC0wLjE5IC0wLjAxLC0wLjI4IC0wLjUyLC0wLjIxIC0xLjA5LC0wLjMzIC0xLjY5LC0wLjMzIC0yLjIzLDAgLTQuMDcsMS42MSAtNC40NSwzLjczIC0wLjI5LDEuNjMgMC41OCw0LjAzIDEuNjksNi4yOWwzLjMgLTAuOTEgMC4wNCAwLjYgLTIuODggMC44MyAwLjEgMC4yOCAyLjc4IC0wLjAzIDAuMDQgMC42NSAtMi42OSAwLjcyYzAuMDQsMC4wOCAwLjA5LDAuMTYgMC4xMywwLjI0bDIuNTYgLTAuNzQgMC4wMyAwLjYyIC0yLjI4IDAuNjggMC4xMyAwLjIyIDEuMzIgLTAuMzIgMC4wMiAwLjQyIC0xLjEyIDAuMjkgMC4xIDAuMTcgMS4wMSAtMC4yNyAwLjAxIDAuNDUgLTAuOCAwLjE5IDAuMDkgMC4xNCAwLjcyIC0wLjE5IDAuMDEgMC40MyAtMC41IDAuMTNjMC4yNiwwLjQzIDAuNSwwLjgxIDAuNywxLjE0em0xLjg2IC0yLjgxYzAuMDQsLTAuMDggMC4wOSwtMC4xNSAwLjEzLC0wLjIzbC0xLjU0IDAuMzkgLTAgMC4xOSAxLjQgLTAuMzcgMCAwLjAyem0xLjQ4IC0yLjk2YzAuMDQsLTAuMSAwLjA4LC0wLjE5IDAuMTIsLTAuMjlsLTEuOTYgMC41NiAwLjAxIDAuMjcgMS44MyAtMC41M3oiIC8+PHBhdGggZD0iTTYuOTcgMGMwLjM0LDIuNCAxLjc5LDMuMTMgMy43NywzLjA4IC0yLjQxLDAuMTcgLTMuNzYsMS4xMSAtMy43NywzLjA4IDAuMjcsLTIuMyAtMS41OCwtMi44MiAtMy43NywtMy4wOCAyLjIsMC4xNSAzLjQ0LC0wLjg4IDMuNzcsLTMuMTh6IiAvPjwvZz48L3N2Zz4=",x:void 0,y:void 0,height:24,width:24,excavate:!0}})})}),(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("p",{className:"text-sm text-muted-foreground",children:"Booking ID"}),a.jsx("p",{className:"font-mono text-lg tracking-widest",children:l.slice(0,10).toUpperCase()})]}),a.jsx(d.Z,{}),(0,a.jsxs)("div",{className:"space-y-4",children:[a.jsx(p,{label:"Passenger(s)",value:e.passengers?.join(", "),icon:c.Z}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[a.jsx(p,{label:"From",value:e.pickupAddress?.split(",")[0],icon:u.Z}),a.jsx(p,{label:"To",value:e.destinationAddress?.split(",")[0],icon:u.Z})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[a.jsx(p,{label:"Seat(s)",value:e.itemDescription,icon:m.Z}),a.jsx(p,{label:"Date & Time",value:`${t}, ${r}`,icon:x.Z})]})]}),e.wifiPassword&&(0,a.jsxs)("div",{className:"p-3 rounded-lg bg-blue-500/10 text-blue-500 flex items-start gap-3",children:[a.jsx(h.Z,{className:"h-5 w-5 mt-0.5 flex-shrink-0"}),(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-xs font-semibold",children:"Onboard WiFi"}),(0,a.jsxs)("p",{className:"text-xs font-medium",children:["Password: ",a.jsx("span",{className:"font-bold",children:e.wifiPassword})]})]})]}),(0,a.jsxs)("div",{className:"p-3 rounded-lg bg-blue-500/10 text-blue-500 flex items-start gap-3",children:[a.jsx(f.Z,{className:"h-5 w-5 mt-0.5 flex-shrink-0"}),a.jsx("p",{className:"text-xs font-medium",children:"driverName"in e&&e.driverName?`Your driver is ${e.driverName}.`:"A driver will be assigned closer to your departure time. Log in to your account to receive live notifications."})]}),a.jsx(d.Z,{}),a.jsx("p",{className:"text-xs text-center text-muted-foreground pt-4",children:"Please arrive at the terminal at least 30 minutes before departure. Have a safe trip!"})]})]})});return s?a.jsx("div",{ref:s,children:j}):j});g.displayName="Ticket"},85086:(e,s,t)=>{t.d(s,{e:()=>n});var a=t(10326),r=t(51223);t(17577);var l=t(12700);let n=e=>(0,a.jsxs)("div",{className:(0,r.cn)("flex items-center gap-2",e.className),children:[a.jsx(l.$,{...e,className:"h-full w-auto"}),a.jsx("span",{className:"text-2xl font-bold tracking-tight",children:"Engraced Smiles"})]})},33261:(e,s,t)=>{t.d(s,{Cd:()=>d,X:()=>c,bZ:()=>o});var a=t(10326),r=t(17577),l=t(79360),n=t(51223);let i=(0,l.j)("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),o=r.forwardRef(({className:e,variant:s,...t},r)=>a.jsx("div",{ref:r,role:"alert",className:(0,n.cn)(i({variant:s}),e),...t}));o.displayName="Alert";let d=r.forwardRef(({className:e,...s},t)=>a.jsx("h5",{ref:t,className:(0,n.cn)("mb-1 font-medium leading-none tracking-tight",e),...s}));d.displayName="AlertTitle";let c=r.forwardRef(({className:e,...s},t)=>a.jsx("div",{ref:t,className:(0,n.cn)("text-sm [&_p]:leading-relaxed",e),...s}));c.displayName="AlertDescription"},38443:(e,s,t)=>{t.d(s,{C:()=>i});var a=t(10326);t(17577);var r=t(79360),l=t(51223);let n=(0,r.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function i({className:e,variant:s,...t}){return a.jsx("div",{className:(0,l.cn)(n({variant:s}),e),...t})}},33194:(e,s,t)=>{t.d(s,{f:()=>d});var a=t(10326);t(17577);var r=t(11890),l=t(39183),n=t(68351),i=t(51223),o=t(91664);function d({className:e,classNames:s,showOutsideDays:t=!0,...d}){return a.jsx(n._W,{showOutsideDays:t,className:(0,i.cn)("p-3",e),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:(0,i.cn)((0,o.d)({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"text-center text-sm p-0 relative",day:(0,i.cn)((0,o.d)({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"text-muted-foreground opacity-50",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...s},components:{IconLeft:({...e})=>a.jsx(r.Z,{className:"h-4 w-4"}),IconRight:({...e})=>a.jsx(l.Z,{className:"h-4 w-4"})},...d})}d.displayName="Calendar"},29752:(e,s,t)=>{t.d(s,{Ol:()=>i,SZ:()=>d,Zb:()=>n,aY:()=>c,eW:()=>u,ll:()=>o});var a=t(10326),r=t(17577),l=t(51223);let n=r.forwardRef(({className:e,...s},t)=>a.jsx("div",{ref:t,className:(0,l.cn)("rounded-xl border bg-card text-card-foreground shadow-sm overflow-hidden",e),...s}));n.displayName="Card";let i=r.forwardRef(({className:e,...s},t)=>a.jsx("div",{ref:t,className:(0,l.cn)("flex flex-col space-y-1.5 p-6",e),...s}));i.displayName="CardHeader";let o=r.forwardRef(({className:e,...s},t)=>a.jsx("h3",{ref:t,className:(0,l.cn)("text-2xl font-semibold leading-none tracking-tight",e),...s}));o.displayName="CardTitle";let d=r.forwardRef(({className:e,...s},t)=>a.jsx("p",{ref:t,className:(0,l.cn)("text-sm text-muted-foreground",e),...s}));d.displayName="CardDescription";let c=r.forwardRef(({className:e,...s},t)=>a.jsx("div",{ref:t,className:(0,l.cn)("p-6 pt-0",e),...s}));c.displayName="CardContent";let u=r.forwardRef(({className:e,...s},t)=>a.jsx("div",{ref:t,className:(0,l.cn)("flex items-center p-6 pt-0",e),...s}));u.displayName="CardFooter"},41190:(e,s,t)=>{t.d(s,{I:()=>n});var a=t(10326),r=t(17577),l=t(51223);let n=r.forwardRef(({className:e,type:s,...t},r)=>a.jsx("input",{type:s,className:(0,l.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:r,...t}));n.displayName="Input"},98150:(e,s,t)=>{t.d(s,{s:()=>i});var a=t(10326),r=t(17577),l=t(57127);t(31645);var n=t(51223);/**
 * @project Engraced Smiles
 * @author Daniel Innocent <@mdtbmw>
 * @copyright Copyright (c) 2024. All rights reserved.
 * This software is the exclusive property of Daniel Innocent.
 * A license has been granted to Mr. Ismail Muhammed for resale to Engraced Smiles.
 */let i=r.forwardRef(({className:e,value:s,onChange:t,...r},i)=>a.jsx(l.ZP,{defaultCountry:"NG",international:!0,countryCallingCodeEditable:!1,value:s,onChange:t,className:(0,n.cn)("flex h-12 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),...r}));i.displayName="PhoneInput"},51027:(e,s,t)=>{t.d(s,{J2:()=>i,xo:()=>o,yk:()=>d});var a=t(10326),r=t(17577),l=t(57921),n=t(51223);let i=l.fC,o=l.xz,d=r.forwardRef(({className:e,align:s="center",sideOffset:t=4,...r},i)=>a.jsx(l.h_,{children:a.jsx(l.VY,{ref:i,align:s,sideOffset:t,className:(0,n.cn)("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r})}));d.displayName=l.VY.displayName},29280:(e,s,t)=>{t.d(s,{Bw:()=>f,Ph:()=>c,Ql:()=>p,i4:()=>m,ki:()=>u});var a=t(10326),r=t(17577),l=t(24425),n=t(941),i=t(96633),o=t(32933),d=t(51223);let c=l.fC;l.ZA;let u=l.B4,m=r.forwardRef(({className:e,children:s,...t},r)=>(0,a.jsxs)(l.xz,{ref:r,className:(0,d.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...t,children:[s,a.jsx(l.JO,{asChild:!0,children:a.jsx(n.Z,{className:"h-4 w-4 opacity-50"})})]}));m.displayName=l.xz.displayName;let x=r.forwardRef(({className:e,...s},t)=>a.jsx(l.u_,{ref:t,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",e),...s,children:a.jsx(i.Z,{className:"h-4 w-4"})}));x.displayName=l.u_.displayName;let h=r.forwardRef(({className:e,...s},t)=>a.jsx(l.$G,{ref:t,className:(0,d.cn)("flex cursor-default items-center justify-center py-1",e),...s,children:a.jsx(n.Z,{className:"h-4 w-4"})}));h.displayName=l.$G.displayName;let f=r.forwardRef(({className:e,children:s,position:t="popper",...r},n)=>a.jsx(l.h_,{children:(0,a.jsxs)(l.VY,{ref:n,className:(0,d.cn)("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===t&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:t,...r,children:[a.jsx(x,{}),a.jsx(l.l_,{className:(0,d.cn)("p-1","popper"===t&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s}),a.jsx(h,{})]})}));f.displayName=l.VY.displayName,r.forwardRef(({className:e,...s},t)=>a.jsx(l.__,{ref:t,className:(0,d.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...s})).displayName=l.__.displayName;let p=r.forwardRef(({className:e,children:s,...t},r)=>(0,a.jsxs)(l.ck,{ref:r,className:(0,d.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...t,children:[a.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:a.jsx(l.wU,{children:a.jsx(o.Z,{className:"h-4 w-4"})})}),a.jsx(l.eT,{children:s})]}));p.displayName=l.ck.displayName,r.forwardRef(({className:e,...s},t)=>a.jsx(l.Z0,{ref:t,className:(0,d.cn)("-mx-1 my-1 h-px bg-muted",e),...s})).displayName=l.Z0.displayName},78062:(e,s,t)=>{t.d(s,{Z:()=>i});var a=t(10326),r=t(17577),l=t(90220),n=t(51223);let i=r.forwardRef(({className:e,orientation:s="horizontal",decorative:t=!0,...r},i)=>a.jsx(l.f,{ref:i,decorative:t,orientation:s,className:(0,n.cn)("shrink-0 bg-border","horizontal"===s?"h-[1px] w-full":"h-full w-[1px]",e),...r}));i.displayName=l.f.displayName},73326:(e,s,t)=>{t.d(s,{r:()=>i});var a=t(10326),r=t(17577),l=t(41959),n=t(51223);let i=r.forwardRef(({className:e,...s},t)=>a.jsx(l.fC,{className:(0,n.cn)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...s,ref:t,children:a.jsx(l.bU,{className:(0,n.cn)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));i.displayName=l.fC.displayName},82015:(e,s,t)=>{t.d(s,{g:()=>n});var a=t(10326),r=t(17577),l=t(51223);let n=r.forwardRef(({className:e,...s},t)=>a.jsx("textarea",{className:(0,l.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:t,...s}));n.displayName="Textarea"},1557:(e,s,t)=>{t.d(s,{K:()=>n,k:()=>i});var a=t(17577);t(76);var r=t(49260),l=t(99506);function n(e,s={listen:!0}){let[t,n]=(0,a.useState)(null),[i,o]=(0,a.useState)(!0),[d,c]=(0,a.useState)(null),{user:u,loading:m}=(0,r.a)();return(0,l.CU)(),(0,a.useMemo)(()=>s.queryConstraints||[],[JSON.stringify(s.queryConstraints)]),{data:t,loading:i,error:d}}function i(e){(0,l.CU)();let[s,t]=(0,a.useState)(null),[r,n]=(0,a.useState)(!0),[i,o]=(0,a.useState)(null);return{data:s,loading:r,error:i}}},58451:(e,s,t)=>{t.d(s,{aC:()=>a.a,Kx:()=>l.K,kh:()=>l.k,CU:()=>r.CU}),t(35957),t(76);var a=t(49260);t(14592);var r=t(99506);t(10326);var l=t(1557)},99506:(e,s,t)=>{t.d(s,{CU:()=>r}),t(10326),t(17577);var a=t(33800);let r=()=>(0,a.X)().firestore},19574:(e,s,t)=>{t.d(s,{a:()=>r});var a=t(17577);/**
 * @project Engraced Smiles
 * @author Daniel Innocent <@mdtbmw>
 * @copyright Copyright (c) 2024. All rights reserved.
 * This software is the exclusive property of Daniel Innocent.
 * A license has been granted to Mr. Ismail Muhammed for resale to Engraced Smiles.
 */let r=e=>{let s=(0,a.useMemo)(()=>e?new Date(e).getTime():0,[e]),[t,r]=(0,a.useState)(s?s-new Date().getTime():0);return((0,a.useEffect)(()=>{if(!s){r(0);return}let e=setInterval(()=>{r(s-new Date().getTime())},1e3);return()=>clearInterval(e)},[s]),t<0||!s)?{days:0,hours:0,minutes:0,seconds:0,isFinished:!0}:{days:Math.floor(t/864e5),hours:Math.floor(t%864e5/36e5),minutes:Math.floor(t%36e5/6e4),seconds:Math.floor(t%6e4/1e3),isFinished:!1}}},73881:(e,s,t)=>{t.r(s),t.d(s,{default:()=>r});var a=t(66621);let r=e=>[{type:"image/x-icon",sizes:"16x16",url:(0,a.fillMetadataSegment)(".",e.params,"favicon.ico")+""}]}};