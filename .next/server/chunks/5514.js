exports.id=5514,exports.ids=[5514],exports.modules={84587:(e,r,t)=>{let a={"4f044a2a5e69c63dba22f6212275a26760accfd6":()=>Promise.resolve().then(t.bind(t,891)).then(e=>e.findAvailableDepartures)};async function s(e,...r){return(await a[e]()).apply(null,r)}e.exports={"4f044a2a5e69c63dba22f6212275a26760accfd6":s.bind(null,"4f044a2a5e69c63dba22f6212275a26760accfd6")}},92532:(e,r,t)=>{"use strict";t.d(r,{w:()=>a}),t(15424);var a=(0,t(46242).$)("4f044a2a5e69c63dba22f6212275a26760accfd6")},55296:(e,r,t)=>{"use strict";t.d(r,{OL:()=>v,_T:()=>f,aR:()=>n,f$:()=>x,fY:()=>m,le:()=>b,vW:()=>d,xo:()=>p,yT:()=>g});var a=t(10326),s=t(17577),o=t(61947),l=t(51223),i=t(91664);let n=o.fC,d=o.xz,c=o.h_,u=s.forwardRef(({className:e,...r},t)=>a.jsx(o.aV,{className:(0,l.cn)("fixed inset-0 z-50 bg-black/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...r,ref:t}));u.displayName=o.aV.displayName;let f=s.forwardRef(({className:e,...r},t)=>(0,a.jsxs)(c,{children:[a.jsx(u,{}),a.jsx(o.VY,{ref:t,className:(0,l.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-top-[-48%] data-[state=open]:slide-in-from-top-[-48%] sm:rounded-lg",e),...r})]}));f.displayName=o.VY.displayName;let m=({className:e,...r})=>a.jsx("div",{className:(0,l.cn)("flex flex-col space-y-2 text-center sm:text-left",e),...r});m.displayName="AlertDialogHeader";let p=({className:e,...r})=>a.jsx("div",{className:(0,l.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...r});p.displayName="AlertDialogFooter";let x=s.forwardRef(({className:e,...r},t)=>a.jsx(o.Dx,{ref:t,className:(0,l.cn)("text-lg font-semibold",e),...r}));x.displayName=o.Dx.displayName;let g=s.forwardRef(({className:e,...r},t)=>a.jsx(o.dk,{ref:t,className:(0,l.cn)("text-sm text-muted-foreground",e),...r}));g.displayName=o.dk.displayName;let v=s.forwardRef(({className:e,...r},t)=>a.jsx(o.aU,{ref:t,className:(0,l.cn)((0,i.d)(),e),...r}));v.displayName=o.aU.displayName;let b=s.forwardRef(({className:e,...r},t)=>a.jsx(o.$j,{ref:t,className:(0,l.cn)((0,i.d)({variant:"outline"}),"mt-2 sm:mt-0",e),...r}));b.displayName=o.$j.displayName},91664:(e,r,t)=>{"use strict";t.d(r,{d:()=>n,z:()=>d});var a=t(10326),s=t(17577),o=t(99469),l=t(79360),i=t(51223);let n=(0,l.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=s.forwardRef(({className:e,variant:r,size:t,asChild:s=!1,...l},d)=>{let c=s?o.g7:"button";return a.jsx(c,{className:(0,i.cn)(n({variant:r,size:t,className:e})),ref:d,...l})});d.displayName="Button"},47548:(e,r,t)=>{"use strict";t.d(r,{KI:()=>m,d$:()=>p,lr:()=>f});var a=t(10326),s=t(17577),o=t(481),l=t(86333),i=t(24230),n=t(51223),d=t(91664);let c=s.createContext(null);function u(){let e=s.useContext(c);if(!e)throw Error("useCarousel must be used within a <Carousel />");return e}let f=s.forwardRef(({orientation:e="horizontal",opts:r,setApi:t,plugins:l,className:i,children:d,...u},f)=>{let[m,p]=(0,o.Z)({...r,axis:"horizontal"===e?"x":"y"},l),[x,g]=s.useState(!1),[v,b]=s.useState(!1),h=s.useCallback(e=>{e&&(g(e.canScrollPrev()),b(e.canScrollNext()))},[]),y=s.useCallback(()=>{p?.scrollPrev()},[p]),N=s.useCallback(()=>{p?.scrollNext()},[p]),w=s.useCallback(e=>{"ArrowLeft"===e.key?(e.preventDefault(),y()):"ArrowRight"===e.key&&(e.preventDefault(),N())},[y,N]);return s.useEffect(()=>{p&&t&&t(p)},[p,t]),s.useEffect(()=>{if(p)return h(p),p.on("reInit",h),p.on("select",h),()=>{p?.off("select",h)}},[p,h]),a.jsx(c.Provider,{value:{carouselRef:m,api:p,opts:r,orientation:e||(r?.axis==="y"?"vertical":"horizontal"),scrollPrev:y,scrollNext:N,canScrollPrev:x,canScrollNext:v},children:a.jsx("div",{ref:f,onKeyDownCapture:w,className:(0,n.cn)("relative",i),role:"region","aria-roledescription":"carousel",...u,children:d})})});f.displayName="Carousel";let m=s.forwardRef(({className:e,...r},t)=>{let{carouselRef:s,orientation:o}=u();return a.jsx("div",{ref:s,className:"overflow-hidden",children:a.jsx("div",{ref:t,className:(0,n.cn)("flex","horizontal"===o?"-ml-4":"-mt-4 flex-col",e),...r})})});m.displayName="CarouselContent";let p=s.forwardRef(({className:e,...r},t)=>{let{orientation:s}=u();return a.jsx("div",{ref:t,role:"group","aria-roledescription":"slide",className:(0,n.cn)("min-w-0 shrink-0 grow-0 basis-full","horizontal"===s?"pl-4":"pt-4",e),...r})});p.displayName="CarouselItem",s.forwardRef(({className:e,variant:r="outline",size:t="icon",...s},o)=>{let{orientation:i,scrollPrev:c,canScrollPrev:f}=u();return(0,a.jsxs)(d.z,{ref:o,variant:r,size:t,className:(0,n.cn)("absolute  h-8 w-8 rounded-full","horizontal"===i?"-left-12 top-1/2 -translate-y-1/2":"-top-12 left-1/2 -translate-x-1/2 rotate-90",e),disabled:!f,onClick:c,...s,children:[a.jsx(l.Z,{className:"h-4 w-4"}),a.jsx("span",{className:"sr-only",children:"Previous slide"})]})}).displayName="CarouselPrevious",s.forwardRef(({className:e,variant:r="outline",size:t="icon",...s},o)=>{let{orientation:l,scrollNext:c,canScrollNext:f}=u();return(0,a.jsxs)(d.z,{ref:o,variant:r,size:t,className:(0,n.cn)("absolute h-8 w-8 rounded-full","horizontal"===l?"-right-12 top-1/2 -translate-y-1/2":"-bottom-12 left-1/2 -translate-x-1/2 rotate-90",e),disabled:!f,onClick:c,...s,children:[a.jsx(i.Z,{className:"h-4 w-4"}),a.jsx("span",{className:"sr-only",children:"Next slide"})]})}).displayName="CarouselNext"},9969:(e,r,t)=>{"use strict";t.d(r,{NI:()=>g,Wi:()=>u,l0:()=>d,lX:()=>x,pf:()=>v,xJ:()=>p,zG:()=>b});var a=t(10326),s=t(17577),o=t(99469),l=t(74723),i=t(51223),n=t(44794);let d=l.RV,c=s.createContext({}),u=({...e})=>a.jsx(c.Provider,{value:{name:e.name},children:a.jsx(l.Qr,{...e})}),f=()=>{let e=s.useContext(c),r=s.useContext(m),{getFieldState:t,formState:a}=(0,l.Gc)(),o=t(e.name,a);if(!e)throw Error("useFormField should be used within <FormField>");let{id:i}=r;return{id:i,name:e.name,formItemId:`${i}-form-item`,formDescriptionId:`${i}-form-item-description`,formMessageId:`${i}-form-item-message`,...o}},m=s.createContext({}),p=s.forwardRef(({className:e,...r},t)=>{let o=s.useId();return a.jsx(m.Provider,{value:{id:o},children:a.jsx("div",{ref:t,className:(0,i.cn)("space-y-2",e),...r})})});p.displayName="FormItem";let x=s.forwardRef(({className:e,...r},t)=>{let{error:s,formItemId:o}=f();return a.jsx(n._,{ref:t,className:(0,i.cn)(s&&"text-destructive",e),htmlFor:o,...r})});x.displayName="FormLabel";let g=s.forwardRef(({...e},r)=>{let{error:t,formItemId:s,formDescriptionId:l,formMessageId:i}=f();return a.jsx(o.g7,{ref:r,id:s,"aria-describedby":t?`${l} ${i}`:`${l}`,"aria-invalid":!!t,...e})});g.displayName="FormControl";let v=s.forwardRef(({className:e,...r},t)=>{let{formDescriptionId:s}=f();return a.jsx("p",{ref:t,id:s,className:(0,i.cn)("text-sm text-muted-foreground",e),...r})});v.displayName="FormDescription";let b=s.forwardRef(({className:e,children:r,...t},s)=>{let{error:o,formMessageId:l}=f(),n=o?String(o?.message??""):r;return n?a.jsx("p",{ref:s,id:l,className:(0,i.cn)("text-sm font-medium text-destructive",e),...t,children:n}):null});b.displayName="FormMessage"},44794:(e,r,t)=>{"use strict";t.d(r,{_:()=>d});var a=t(10326),s=t(17577),o=t(34478),l=t(79360),i=t(51223);let n=(0,l.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=s.forwardRef(({className:e,...r},t)=>a.jsx(o.f,{ref:t,className:(0,i.cn)(n(),e),...r}));d.displayName=o.f.displayName},38227:(e,r,t)=>{"use strict";t.d(r,{O:()=>o});var a=t(10326),s=t(51223);function o({className:e,...r}){return a.jsx("div",{className:(0,s.cn)("animate-pulse rounded-md bg-muted",e),...r})}},891:(e,r,t)=>{"use strict";t.r(r),t.d(r,{findAvailableDepartures:()=>d});var a=t(27745);t(26461);var s=t(92509),o=t.n(s),l=t(99481),i=t(85723);/**
 * @project Engraced Smiles
 * @author Daniel Innocent <@mdtbmw>
 * @copyright Copyright (c) 2024. All rights reserved.
 * This software is the exclusive property of Daniel Innocent.
 * A license has been granted to Mr. Ismail Muhammed for resale to Engraced Smiles.
 */let n=e=>{if(null==e||"object"!=typeof e)return e;if(e instanceof o().firestore.Timestamp)return e.toDate().toISOString();if(Array.isArray(e))return e.map(n);let r={};for(let t in e)Object.prototype.hasOwnProperty.call(e,t)&&void 0!==e[t]&&(r[t]=n(e[t]));return r};async function d(e,r){let{adminDb:t}=(0,l.getFirebaseAdmin)();try{console.log(`ðŸ” Searching for departures: routeId=${e}, date=${r}`);let a=t.collection("scheduledTrips"),s=await a.where("routeId","==",e).get();console.log(`ðŸ“Š All departures for route ${e}: ${s.size}`),s.forEach(e=>{let r=e.data();console.log(`  - Date: "${r.departureDate}", Status: "${r.status}", Period: "${r.departurePeriod}"`)});let o=a.where("routeId","==",e).where("departureDate","==",r).where("status","in",["Scheduled","Boarding","Provisional"]),l=await o.get();if(console.log(`ðŸ“Š Found ${l.size} departures for route ${e} on ${r}`),l.empty)return console.log(`âŒ No departures found for route ${e} on ${r}`),[];let i=l.docs.map(e=>n({id:e.id,...e.data()})).filter(e=>{let r=e.bookedSeats?.length||0,t=Object.keys(e.seatHolds||{}).length,a=r+t<7;return console.log(`  Trip ${e.id}: Booked=${r}, Held=${t}, HasSeats=${a}`),a}).sort((e,r)=>"Morning"===e.departurePeriod&&"Evening"===r.departurePeriod?-1:"Evening"===e.departurePeriod&&"Morning"===r.departurePeriod?1:0);return console.log(`âœ… Returning ${i.length} available departures`),i}catch(t){throw console.error(`Error in findAvailableDepartures for route ${e} on ${r}:`,t),Error("A database error occurred while searching for departures.")}}(0,i.ensureServerEntryExports)([d]),(0,a.registerServerReference)("4f044a2a5e69c63dba22f6212275a26760accfd6",d)},99481:(e,r,t)=>{"use strict";t.d(r,{getFirebaseAdmin:()=>i});var a=t(92509),s=t.n(a),o=t(60325);t(99455);let l=null;function i(){if(!l)throw Error("Firebase Admin SDK is not initialized. Check server logs and environment variables.");return l}!function(){if(l)return;let e=process.env.FIREBASE_PRIVATE_KEY;if(!e||!process.env.FIREBASE_CLIENT_EMAIL){console.error("CRITICAL ERROR: Firebase Admin credentials are not fully set in environment variables. Admin features will fail.");return}let r={projectId:"studio-8506488239-824d2",clientEmail:process.env.FIREBASE_CLIENT_EMAIL,privateKey:e.replace(/\\n/g,"\n")};try{let e=(0,o.getApps)().length?(0,o.getApps)()[0]:s().initializeApp({credential:s().credential.cert(r),databaseURL:"https://studio-8506488239-824d2.firebaseio.com"});l={adminApp:e,adminDb:s().firestore(e),adminAuth:s().auth(e)},console.log("Firebase Admin SDK initialized successfully.")}catch(e){console.error("Firebase Admin SDK initialization error:",e.message)}}()},99455:(e,r,t)=>{}};