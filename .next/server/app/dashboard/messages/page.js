(()=>{var e={};e.id=7091,e.ids=[7091],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},83122:e=>{"use strict";e.exports=require("undici")},6113:e=>{"use strict";e.exports=require("crypto")},9523:e=>{"use strict";e.exports=require("dns")},82361:e=>{"use strict";e.exports=require("events")},57147:e=>{"use strict";e.exports=require("fs")},13685:e=>{"use strict";e.exports=require("http")},85158:e=>{"use strict";e.exports=require("http2")},41808:e=>{"use strict";e.exports=require("net")},22037:e=>{"use strict";e.exports=require("os")},71017:e=>{"use strict";e.exports=require("path")},77282:e=>{"use strict";e.exports=require("process")},12781:e=>{"use strict";e.exports=require("stream")},24404:e=>{"use strict";e.exports=require("tls")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},94192:(e,r,s)=>{"use strict";s.r(r),s.d(r,{GlobalError:()=>i.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>c,routeModule:()=>x,tree:()=>d}),s(4681),s(22834),s(73766),s(35866);var t=s(23191),a=s(88716),o=s(37922),i=s.n(o),l=s(95231),n={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>l[e]);s.d(r,n);let d=["",{children:["dashboard",{children:["messages",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,4681)),"/root/app/src/app/dashboard/messages/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,22834)),"/root/app/src/app/dashboard/layout.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,73766)),"/root/app/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,35866,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["/root/app/src/app/dashboard/messages/page.tsx"],u="/dashboard/messages/page",p={require:s,loadChunk:()=>Promise.resolve()},x=new t.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/dashboard/messages/page",pathname:"/dashboard/messages",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},67282:(e,r,s)=>{Promise.resolve().then(s.bind(s,7022))},28439:(e,r,s)=>{Promise.resolve().then(s.bind(s,76562))},86333:(e,r,s)=>{"use strict";s.d(r,{Z:()=>t});/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,s(62881).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},1572:(e,r,s)=>{"use strict";s.d(r,{Z:()=>t});/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,s(62881).Z)("Sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]])},7022:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>n});var t=s(10326),a=s(49260),o=s(35047);s(17577);var i=s(15971),l=s(87321);/**
 * @project Engraced Smiles
 * @author Daniel Innocent <@mdtbmw>
 * @copyright Copyright (c) 2024. All rights reserved.
 * This software is the exclusive property of Daniel Innocent.
 * A license has been granted to Mr. Ismail Muhammed for resale to Engraced Smiles.
 */function n({children:e}){let{user:r,loading:s}=(0,a.a)();return((0,o.useRouter)(),s||!r||"customer"!==r.userType)?t.jsx(i.Preloader,{}):(0,t.jsxs)("div",{className:"relative flex flex-col h-dvh bg-background text-foreground",children:[t.jsx("main",{className:"flex-1 overflow-y-auto pb-24",children:e}),t.jsx(l.h,{})]})}},76562:(e,r,s)=>{"use strict";s.r(r),s.d(r,{default:()=>j});var t=s(10326),a=s(3594),o=s(91664),i=s(1572),l=s(86333),n=s(71992),d=s(35047),c=s(17577),u=s(49260),p=s(76),x=s(14592),m=s(41190),h=s(3236),f=s(51223),g=s(15971),y=s(1557);let b=({onQuickReply:e,quickReplies:r})=>(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center text-center p-8 h-full",children:[t.jsx(a.qE,{className:"h-20 w-20 mb-4 border-4 border-primary/20",children:t.jsx(a.Q5,{className:"text-3xl bg-primary/10 text-primary",children:"S"})}),t.jsx("h2",{className:"text-2xl font-bold",children:"Welcome to Support"}),t.jsx("p",{className:"text-muted-foreground mt-2 max-w-sm",children:"Hi! I'm your automated assistant. How can I help you today? You can also type your own question below."}),t.jsx("div",{className:"flex flex-col gap-2 mt-8 w-full max-w-sm",children:r.map(r=>(0,t.jsxs)(o.z,{variant:"outline",className:"justify-start h-auto py-3",onClick:()=>e(r),children:[t.jsx(i.Z,{className:"h-4 w-4 mr-3 text-primary"}),r]},r))})]}),v=({conversation:e,messages:r,onSendMessage:s,supportSettings:i})=>{let[p,x]=(0,c.useState)(""),y=(0,c.useRef)(null),{user:v}=(0,u.a)(),j=(0,d.useRouter)();return((0,c.useEffect)(()=>{y.current?.scrollIntoView({behavior:"smooth"})},[r]),e)?(0,t.jsxs)("div",{className:"flex flex-col h-full bg-background",children:[(0,t.jsxs)("header",{className:"flex items-center p-4 border-b border-border/50 shrink-0",children:[t.jsx(o.z,{variant:"ghost",size:"icon",onClick:()=>j.push("/dashboard"),className:"mr-2",children:t.jsx(l.Z,{className:"h-5 w-5"})}),t.jsx(a.qE,{className:"h-10 w-10 mr-3 border-2 border-primary/30",children:t.jsx(a.Q5,{children:"S"})}),(0,t.jsxs)("div",{className:"flex-1",children:[t.jsx("h2",{className:"font-bold",children:"Support Team"}),(0,t.jsxs)("p",{className:"text-xs text-green-500 flex items-center gap-1.5",children:[t.jsx("span",{className:"h-2 w-2 rounded-full bg-green-500 animate-pulse"}),"Online"]})]})]}),(0,t.jsxs)(h.x,{className:"flex-1",children:[r.length<=1?t.jsx(b,{onQuickReply:e=>{s(e)},quickReplies:i?.quickReplies||[]}):t.jsx("div",{className:"p-4 space-y-6",children:r.map((e,r)=>(0,t.jsxs)("div",{className:(0,f.cn)("flex items-end gap-2 w-full",e.senderId===v?.id?"justify-end":"justify-start"),children:[e.senderId!==v?.id&&t.jsx(a.qE,{className:"h-8 w-8 self-end",children:t.jsx(a.Q5,{children:"S"})}),t.jsx("div",{className:(0,f.cn)("max-w-[80%] rounded-2xl px-4 py-3 shadow-sm text-sm md:text-base",e.senderId===v?.id?"bg-primary text-primary-foreground rounded-br-none":"bg-card rounded-bl-none"),children:t.jsx("p",{children:e.text})})]},e.id||r))}),t.jsx("div",{ref:y})]}),t.jsx("footer",{className:"p-4 border-t border-border/50 bg-background shrink-0",children:(0,t.jsxs)("form",{onSubmit:e=>{e.preventDefault(),p.trim()&&(s(p.trim()),x(""))},className:"relative",children:[t.jsx(m.I,{placeholder:"Type a message...",className:"h-12 pr-12 rounded-full bg-card text-base",value:p,onChange:e=>x(e.target.value)}),t.jsx(o.z,{type:"submit",size:"icon",className:"absolute top-1/2 right-1.5 -translate-y-1/2 rounded-full h-9 w-9 bg-primary",children:t.jsx(n.Z,{className:"h-5 w-5"})})]})})]}):t.jsx(g.Preloader,{})};function j(){let{user:e}=(0,u.a)(),[r,s]=(0,c.useState)(null),[a,o]=(0,c.useState)([]),[i,l]=(0,c.useState)(!0),n=(0,p.ad)(x.default),{data:d}=(0,y.k)("settings/support"),m=async s=>{if(!e||!r)return;let t=(0,p.hJ)(n,"conversations",r.id,"messages"),a=(0,p.JU)(n,"conversations",r.id),o={conversationId:r.id,senderId:e.id,text:s,createdAt:(0,p.Bt)(),receiverId:"support"},i={text:s,createdAt:new Date};try{await (0,p.ET)(t,o),await updateDoc(a,{lastMessage:i,unreadByAdmin:(0,p.nP)(1)})}catch(e){console.error("Error sending message:",e)}};return i?t.jsx(g.Preloader,{}):t.jsx(v,{conversation:r,messages:a,onSendMessage:m,supportSettings:d})}},3594:(e,r,s)=>{"use strict";s.d(r,{F$:()=>n,Q5:()=>d,qE:()=>l});var t=s(10326),a=s(17577),o=s(4150),i=s(51223);let l=a.forwardRef(({className:e,...r},s)=>t.jsx(o.fC,{ref:s,className:(0,i.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",e),...r}));l.displayName=o.fC.displayName;let n=a.forwardRef(({className:e,...r},s)=>t.jsx(o.Ee,{ref:s,className:(0,i.cn)("aspect-square h-full w-full",e),...r}));n.displayName=o.Ee.displayName;let d=a.forwardRef(({className:e,...r},s)=>t.jsx(o.NY,{ref:s,className:(0,i.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",e),...r}));d.displayName=o.NY.displayName},22834:(e,r,s)=>{"use strict";s.r(r),s.d(r,{$$typeof:()=>i,__esModule:()=>o,default:()=>l});var t=s(68570);let a=(0,t.createProxy)(String.raw`/root/app/src/app/dashboard/layout.tsx`),{__esModule:o,$$typeof:i}=a;a.default;let l=(0,t.createProxy)(String.raw`/root/app/src/app/dashboard/layout.tsx#default`)},4681:(e,r,s)=>{"use strict";s.r(r),s.d(r,{$$typeof:()=>i,__esModule:()=>o,default:()=>l});var t=s(68570);let a=(0,t.createProxy)(String.raw`/root/app/src/app/dashboard/messages/page.tsx`),{__esModule:o,$$typeof:i}=a;a.default;let l=(0,t.createProxy)(String.raw`/root/app/src/app/dashboard/messages/page.tsx#default`)},4150:(e,r,s)=>{"use strict";s.d(r,{Ee:()=>v,NY:()=>j,fC:()=>b});var t=s(17577),a=s(93095),o=s(55049),i=s(65819),l=s(77335),n=s(10326),d="Avatar",[c,u]=(0,a.b)(d),[p,x]=c(d),m=t.forwardRef((e,r)=>{let{__scopeAvatar:s,...a}=e,[o,i]=t.useState("idle");return(0,n.jsx)(p,{scope:s,imageLoadingStatus:o,onImageLoadingStatusChange:i,children:(0,n.jsx)(l.WV.span,{...a,ref:r})})});m.displayName=d;var h="AvatarImage",f=t.forwardRef((e,r)=>{let{__scopeAvatar:s,src:a,onLoadingStatusChange:d=()=>{},...c}=e,u=x(h,s),p=function(e,r){let[s,a]=t.useState("idle");return(0,i.b)(()=>{if(!e){a("error");return}let s=!0,t=new window.Image,o=e=>()=>{s&&a(e)};return a("loading"),t.onload=o("loaded"),t.onerror=o("error"),t.src=e,r&&(t.referrerPolicy=r),()=>{s=!1}},[e,r]),s}(a,c.referrerPolicy),m=(0,o.W)(e=>{d(e),u.onImageLoadingStatusChange(e)});return(0,i.b)(()=>{"idle"!==p&&m(p)},[p,m]),"loaded"===p?(0,n.jsx)(l.WV.img,{...c,ref:r,src:a}):null});f.displayName=h;var g="AvatarFallback",y=t.forwardRef((e,r)=>{let{__scopeAvatar:s,delayMs:a,...o}=e,i=x(g,s),[d,c]=t.useState(void 0===a);return t.useEffect(()=>{if(void 0!==a){let e=window.setTimeout(()=>c(!0),a);return()=>window.clearTimeout(e)}},[a]),d&&"loaded"!==i.imageLoadingStatus?(0,n.jsx)(l.WV.span,{...o,ref:r}):null});y.displayName=g;var b=m,v=f,j=y}};var r=require("../../../webpack-runtime.js");r.C(e);var s=e=>r(r.s=e),t=r.X(0,[8948,8172,1915,4263,9691,5911,1244,1228,6999,2021,7802,8422],()=>s(94192));module.exports=t})();