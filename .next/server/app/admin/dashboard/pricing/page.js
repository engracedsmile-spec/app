(()=>{var e={};e.id=4194,e.ids=[4194],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},83122:e=>{"use strict";e.exports=require("undici")},6113:e=>{"use strict";e.exports=require("crypto")},9523:e=>{"use strict";e.exports=require("dns")},82361:e=>{"use strict";e.exports=require("events")},57147:e=>{"use strict";e.exports=require("fs")},13685:e=>{"use strict";e.exports=require("http")},85158:e=>{"use strict";e.exports=require("http2")},41808:e=>{"use strict";e.exports=require("net")},49411:e=>{"use strict";e.exports=require("node:path")},97742:e=>{"use strict";e.exports=require("node:process")},41041:e=>{"use strict";e.exports=require("node:url")},22037:e=>{"use strict";e.exports=require("os")},71017:e=>{"use strict";e.exports=require("path")},77282:e=>{"use strict";e.exports=require("process")},12781:e=>{"use strict";e.exports=require("stream")},24404:e=>{"use strict";e.exports=require("tls")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},21676:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>n.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>d,routeModule:()=>h,tree:()=>c}),r(2447),r(86120),r(73766),r(35866);var s=r(23191),i=r(88716),a=r(37922),n=r.n(a),o=r(95231),l={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);r.d(t,l);let c=["",{children:["admin",{children:["dashboard",{children:["pricing",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,2447)),"/root/app/src/app/admin/dashboard/pricing/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,86120)),"/root/app/src/app/admin/dashboard/layout.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,73766)),"/root/app/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,35866,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,73881))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],d=["/root/app/src/app/admin/dashboard/pricing/page.tsx"],u="/admin/dashboard/pricing/page",p={require:r,loadChunk:()=>Promise.resolve()},h=new s.AppPageRouteModule({definition:{kind:i.x.APP_PAGE,page:"/admin/dashboard/pricing/page",pathname:"/admin/dashboard/pricing",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},50144:(e,t,r)=>{Promise.resolve().then(r.bind(r,58521))},77506:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r(62881).Z)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},69508:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r(62881).Z)("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]])},98091:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});/**
 * @license lucide-react v0.395.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r(62881).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},47463:(e,t,r)=>{"use strict";r.d(t,{Z:()=>c});var s=r(6113),i=r.n(s);let a={randomUUID:i().randomUUID},n=new Uint8Array(256),o=n.length,l=[];for(let e=0;e<256;++e)l.push((e+256).toString(16).slice(1));let c=function(e,t,r){if(a.randomUUID&&!t&&!e)return a.randomUUID();let s=(e=e||{}).random||(e.rng||function(){return o>n.length-16&&(i().randomFillSync(n),o=0),n.slice(o,o+=16)})();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,t){r=r||0;for(let e=0;e<16;++e)t[r+e]=s[e];return t}return function(e,t=0){return l[e[t+0]]+l[e[t+1]]+l[e[t+2]]+l[e[t+3]]+"-"+l[e[t+4]]+l[e[t+5]]+"-"+l[e[t+6]]+l[e[t+7]]+"-"+l[e[t+8]]+l[e[t+9]]+"-"+l[e[t+10]]+l[e[t+11]]+l[e[t+12]]+l[e[t+13]]+l[e[t+14]]+l[e[t+15]]}(s)}},58521:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>z});var s=r(10326),i=r(91664),a=r(29752),n=r(9969),o=r(41190),l=r(74064),c=r(74723),d=r(27256),u=r(85999),p=r(77506),h=r(86333),x=r(83855),m=r(14561),f=r(69508),g=r(98091),j=r(35047),b=r(17577),v=r(76),y=r(14592),w=r(83739),N=r(70309),k=r(47463),q=r(95379),P=r(55153),C=r(24118),S=r(29280),R=r(74294),D=r(73326);/**
 * @project Engraced Smiles
 * @author Daniel Innocent <@mdtbmw>
 * @copyright Copyright (c) 2024. All rights reserved.
 * This software is the exclusive property of Daniel Innocent.
 * A license has been granted to Mr. Ismail Muhammed for resale to Engraced Smiles.
 *
 * So, you're looking at my code, huh? That's cool. Just don't copy it without asking.
 * I poured my heart, soul, and a questionable amount of caffeine into this.
 * Find me on socials @mdtbmw if you want to geek out over code.
 */let Z=e=>(0,s.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",...e,children:[s.jsx("path",{d:"M8 7l4-4 4 4"}),s.jsx("path",{d:"M12 3v13"}),s.jsx("path",{d:"M16 17l-4 4-4-4"}),s.jsx("path",{d:"M12 21V8"})]}),_=d.Ry({id:d.Z_(),from:d.Z_().min(1,"Please select a departure state."),to:d.Z_().min(1,"Please select a destination state."),price:d.oQ.number().min(1,"Base price must be a positive number."),isDefault:d.O7().optional()}).refine(e=>e.from!==e.to,{message:"Departure and destination states cannot be the same.",path:["to"]}),E=({onComplete:e,existingRoutes:t,routeToEdit:r,children:a})=>{let[d,p]=(0,b.useState)(!1),h=!!r,x=(0,c.cI)({resolver:(0,l.F)(_),defaultValues:r||{id:(0,k.Z)(),from:"",to:"",price:0,isDefault:!1}});(0,b.useEffect)(()=>{d&&(r?x.reset(r):x.reset({id:(0,k.Z)(),from:"",to:"",price:0,isDefault:!1}))},[r,x,d]);let m=R.r.map(e=>e.state).sort();return(0,s.jsxs)(P.h,{open:d,onOpenChange:p,trigger:a,children:[(0,s.jsxs)(C.fK,{children:[(0,s.jsxs)(C.$N,{children:[h?"Edit":"Add"," Route"]}),s.jsx(C.Be,{children:"Define a travel route between two states and set the fare."})]}),s.jsx(n.l0,{...x,children:(0,s.jsxs)("form",{onSubmit:x.handleSubmit(r=>{let s;let i=(0,v.ad)(y.default),a=(0,v.JU)(i,"settings","pricing");if(s=r.isDefault?t.map(e=>({...e,isDefault:!1})):[...t],h){let e=s.findIndex(e=>e.id===r.id);e>-1&&(s[e]=r)}else s.push(r);let n={routes:s};(0,v.pl)(a,n,{merge:!0}).then(()=>{u.Am.success(h?"Route Updated":"Route Created"),e(),p(!1)}).catch(e=>{let t=new N.b({path:a.path,operation:"update",requestResourceData:n});w.s.emit("permission-error",t)})}),className:"space-y-4 pt-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[s.jsx("div",{className:"flex-1",children:s.jsx(n.Wi,{control:x.control,name:"from",render:({field:e})=>(0,s.jsxs)(n.xJ,{children:[s.jsx(n.lX,{children:"From"}),(0,s.jsxs)(S.Ph,{onValueChange:e.onChange,value:e.value,children:[s.jsx(n.NI,{children:s.jsx(S.i4,{children:s.jsx(S.ki,{placeholder:"Select State"})})}),s.jsx(S.Bw,{children:m.map(e=>s.jsx(S.Ql,{value:e,children:e},e))})]}),s.jsx(n.zG,{})]})})}),s.jsx("div",{className:"pt-6",children:s.jsx(i.z,{type:"button",variant:"outline",size:"icon",onClick:()=>{let e=x.getValues("from"),t=x.getValues("to");x.setValue("from",t),x.setValue("to",e)},children:s.jsx(Z,{})})}),s.jsx("div",{className:"flex-1",children:s.jsx(n.Wi,{control:x.control,name:"to",render:({field:e})=>(0,s.jsxs)(n.xJ,{children:[s.jsx(n.lX,{children:"To"}),(0,s.jsxs)(S.Ph,{onValueChange:e.onChange,value:e.value,children:[s.jsx(n.NI,{children:s.jsx(S.i4,{children:s.jsx(S.ki,{placeholder:"Select State"})})}),s.jsx(S.Bw,{children:m.map(e=>s.jsx(S.Ql,{value:e,children:e},e))})]}),s.jsx(n.zG,{})]})})})]}),s.jsx(n.Wi,{control:x.control,name:"price",render:({field:e})=>(0,s.jsxs)(n.xJ,{children:[s.jsx(n.lX,{children:"Price (â‚¦)"}),s.jsx(n.NI,{children:s.jsx(o.I,{type:"number",placeholder:"e.g. 25000",...e})}),s.jsx(n.zG,{})]})}),s.jsx(n.Wi,{control:x.control,name:"isDefault",render:({field:e})=>(0,s.jsxs)(n.xJ,{className:"flex items-center justify-between p-3 rounded-lg bg-muted/50",children:[(0,s.jsxs)("div",{children:[s.jsx(n.lX,{htmlFor:"is-default-switch",className:"font-semibold",children:"Set as Default Route"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"This will be the pre-selected route for new bookings."})]}),s.jsx(n.NI,{children:s.jsx(D.r,{id:"is-default-switch",checked:e.value,onCheckedChange:e.onChange})})]})}),s.jsx(C.cN,{children:s.jsx(i.z,{type:"submit",children:h?"Save Changes":"Create Route"})})]})})]})};function z(){let e=(0,j.useRouter)(),[t,r]=(0,b.useState)(!0),[n,o]=(0,b.useState)({routes:[],charterRates:[]}),l=async()=>{r(!0);let e=(0,v.ad)(y.default),t=(0,v.JU)(e,"settings","pricing");try{let e=await (0,v.QT)(t);e.exists()&&o(e.data())}catch(r){let e=new N.b({path:t.path,operation:"get"});w.s.emit("permission-error",e),u.Am.error("Permission Denied",{description:"You don't have access to these settings."})}finally{r(!1)}},c=async e=>{let t=n.routes.filter(t=>t.id!==e),r=(0,v.ad)(y.default),s=(0,v.JU)(r,"settings","pricing"),i={...n,routes:t};try{await (0,v.pl)(s,i,{merge:!0}),u.Am.success("Route Deleted",{description:"The route has been removed."}),l()}catch(t){let e=new N.b({path:s.path,operation:"update",requestResourceData:i});w.s.emit("permission-error",e)}};return t?s.jsx("div",{className:"flex h-screen w-full items-center justify-center",children:s.jsx(p.Z,{className:"h-8 w-8 animate-spin"})}):(0,s.jsxs)("div",{className:"flex flex-col h-full",children:[(0,s.jsxs)("header",{className:"flex items-center justify-between p-4 sticky top-0 bg-background z-10 border-b border-border/50",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[s.jsx(i.z,{variant:"ghost",size:"icon",onClick:()=>e.back(),className:"mr-2",children:s.jsx(h.Z,{className:"h-5 w-5"})}),s.jsx("h1",{className:"text-xl font-bold",children:"Route Pricing"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[s.jsx(E,{onComplete:l,existingRoutes:n.routes||[],children:(0,s.jsxs)(i.z,{children:[s.jsx(x.Z,{className:"mr-2 h-4 w-4"})," Add New Route"]})}),s.jsx(q.m,{page:"pricing"})]})]}),s.jsx("main",{className:"flex-1 p-4 md:p-6 space-y-6 overflow-y-auto",children:(0,s.jsxs)(a.Zb,{children:[(0,s.jsxs)(a.Ol,{children:[s.jsx(a.ll,{children:"Service Routes & Fares"}),s.jsx(a.SZ,{children:"Define your operational routes and set a base price for trips."})]}),(0,s.jsxs)(a.aY,{className:"space-y-4",children:[n.routes&&n.routes.map(e=>(0,s.jsxs)("div",{className:"flex items-center gap-4 p-4 rounded-lg bg-muted/50",children:[(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("p",{className:"font-bold flex items-center gap-2",children:[e.from," ",s.jsx(m.Z,{className:"h-4 w-4 text-muted-foreground"})," ",e.to]}),e.isDefault&&s.jsx("span",{className:"text-xs font-semibold text-primary",children:"(Default)"})]}),s.jsx("div",{className:"text-lg font-bold text-primary",children:new Intl.NumberFormat("en-NG",{style:"currency",currency:"NGN"}).format(e.price)}),(0,s.jsxs)("div",{className:"flex items-center",children:[s.jsx(E,{onComplete:l,existingRoutes:n.routes,routeToEdit:e,children:s.jsx(i.z,{variant:"ghost",size:"icon",children:s.jsx(f.Z,{className:"h-4 w-4"})})}),s.jsx(i.z,{type:"button",variant:"ghost",size:"icon",onClick:()=>c(e.id),children:s.jsx(g.Z,{className:"h-4 w-4 text-destructive"})})]})]},e.id)),(!n.routes||0===n.routes.length)&&s.jsx("p",{className:"text-center text-muted-foreground py-8",children:'No routes created yet. Click "Add New Route" to begin.'})]})]})})]})}},73326:(e,t,r)=>{"use strict";r.d(t,{r:()=>o});var s=r(10326),i=r(17577),a=r(41959),n=r(51223);let o=i.forwardRef(({className:e,...t},r)=>s.jsx(a.fC,{className:(0,n.cn)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...t,ref:r,children:s.jsx(a.bU,{className:(0,n.cn)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));o.displayName=a.fC.displayName},83739:(e,t,r)=>{"use strict";r.d(t,{s:()=>s});let s=new(r(82361)).EventEmitter},70309:(e,t,r)=>{"use strict";r.d(t,{b:()=>s});class s extends Error{constructor(e){super(`FirestoreError: Missing or insufficient permissions: The following request was denied by Firestore Security Rules:
${JSON.stringify(e,null,2)}`),this.name="FirestorePermissionError",this.context=e,Error.captureStackTrace&&Error.captureStackTrace(this,s)}}},2447:(e,t,r)=>{"use strict";r.r(t),r.d(t,{$$typeof:()=>n,__esModule:()=>a,default:()=>o});var s=r(68570);let i=(0,s.createProxy)(String.raw`/root/app/src/app/admin/dashboard/pricing/page.tsx`),{__esModule:a,$$typeof:n}=i;i.default;let o=(0,s.createProxy)(String.raw`/root/app/src/app/admin/dashboard/pricing/page.tsx#default`)},41959:(e,t,r)=>{"use strict";r.d(t,{bU:()=>N,fC:()=>w});var s=r(17577),i=r(82561),a=r(48051),n=r(93095),o=r(52067),l=r(53405),c=r(2566),d=r(77335),u=r(10326),p="Switch",[h,x]=(0,n.b)(p),[m,f]=h(p),g=s.forwardRef((e,t)=>{let{__scopeSwitch:r,name:n,checked:l,defaultChecked:c,required:p,disabled:h,value:x="on",onCheckedChange:f,form:g,...j}=e,[b,w]=s.useState(null),N=(0,a.e)(t,e=>w(e)),k=s.useRef(!1),q=!b||g||!!b.closest("form"),[P=!1,C]=(0,o.T)({prop:l,defaultProp:c,onChange:f});return(0,u.jsxs)(m,{scope:r,checked:P,disabled:h,children:[(0,u.jsx)(d.WV.button,{type:"button",role:"switch","aria-checked":P,"aria-required":p,"data-state":y(P),"data-disabled":h?"":void 0,disabled:h,value:x,...j,ref:N,onClick:(0,i.M)(e.onClick,e=>{C(e=>!e),q&&(k.current=e.isPropagationStopped(),k.current||e.stopPropagation())})}),q&&(0,u.jsx)(v,{control:b,bubbles:!k.current,name:n,value:x,checked:P,required:p,disabled:h,form:g,style:{transform:"translateX(-100%)"}})]})});g.displayName=p;var j="SwitchThumb",b=s.forwardRef((e,t)=>{let{__scopeSwitch:r,...s}=e,i=f(j,r);return(0,u.jsx)(d.WV.span,{"data-state":y(i.checked),"data-disabled":i.disabled?"":void 0,...s,ref:t})});b.displayName=j;var v=e=>{let{control:t,checked:r,bubbles:i=!0,...a}=e,n=s.useRef(null),o=(0,l.D)(r),d=(0,c.t)(t);return s.useEffect(()=>{let e=n.current,t=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(o!==r&&t){let s=new Event("click",{bubbles:i});t.call(e,r),e.dispatchEvent(s)}},[o,r,i]),(0,u.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:r,...a,tabIndex:-1,ref:n,style:{...e.style,...d,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function y(e){return e?"checked":"unchecked"}var w=g,N=b}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[8948,8172,1915,4263,9691,5911,1244,1228,6999,4568,3324,8880,2087,2021,7802,6519,8479],()=>r(21676));module.exports=s})();